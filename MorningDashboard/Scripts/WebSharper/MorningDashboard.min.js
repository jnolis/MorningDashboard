(function(){var $$=this,$=this.IntelliFactory.Runtime,a,b,c,d,e,f,g,h,i,j,k,l,m;$.Define($$,{MorningDashboard:{Client:{oneBusAwayBlock:function(){var n,K;n=function(o){return function(p){var q,r,s,t,A,B,C,D,E,F,G,H,I,J;q=[p.RouteTitle,p.Arrivals];r=q[0];s=q[1];t=function(u){var v,w,x,y,z;x=u.Time;w=a.ofArray([d.Tags().text(x)]);z=u.TimeUntil;y=a.ofArray([d.Tags().text(z)]);v=a.ofArray([d.Tags().NewTag("td",w),d.Tags().NewTag("td",y)]);return d.Tags().NewTag("tr",v);};A=a.map(t,s);o["HtmlProvider@33"].Clear(o.get_Body());E=a.ofArray([d.Tags().text(r)]);D=a.ofArray([d.Tags().NewTag("h4",E)]);I=a.ofArray([d.Tags().text("ETA")]);J=a.ofArray([d.Tags().text("Minutes")]);H=a.ofArray([d.Tags().NewTag("th",I),d.Tags().NewTag("th",J)]);G=a.ofArray([d.Tags().NewTag("tr",H)]);F=a.append(a.singleton(d.Tags().NewTag("thead",G)),A);C=a.ofArray([e.add(d.Tags().NewTag("div",D),a.ofArray([f.Attr().NewAttr("class","panel-heading")])),e.add(d.Tags().NewTag("table",F),a.ofArray([f.Attr().NewAttr("class","table")]))]);B=a.ofArray([e.add(d.Tags().NewTag("div",C),a.ofArray([f.Attr().NewAttr("class","panel panel-default")]))]);return o.AppendI(e.add(d.Tags().NewTag("div",B),a.ofArray([f.Attr().NewAttr("class","col-md-6")])));};};K=function(){return h.Async("MorningDashboard:1",[]);};return j.refreshBlock(15,K,n);},refreshBlock:function(M,N,O){var P,Q,R,Y,Z;P=$.New(k,{$:0});Q=d.Tags().NewTag("div",P);R=function(S){var T;T=l.Delay(function(){return l.Bind(N(null),function(V){var W,X;if(V.$==1){X=V.$0;(O(S))(X);W=l.Return(null);}else{W=l.Return(null);}return W;});});return l.Start(T,{$:0});};R(Q);Z=function(){var _1;_1=m(function(){return R(Q);},M*1000);return;};e.OnBeforeRender(Z,Q);Y=a.ofArray([Q]);return d.Tags().NewTag("div",Y);},wundergroundBlock:function(){return j.refreshBlock(60*15,function(){return h.Async("MorningDashboard:0",[]);},function(_4){return function(_5){var _6,_7,bg,bh,bi,bj,bk,bl,bm,bn,bo,bp,bq,br,bs,bt;_6=_5.Forecast;_7=a.map(function(_8){var _9,_,ba,bb,bc,bd,be,bf;ba=_8.Time;_=a.ofArray([d.Tags().text(ba)]);bd="wi "+_8.WeatherIcon;bc=a.ofArray([f.Attr().NewAttr("class",bd)]);bb=a.ofArray([d.Tags().NewTag("i",bc)]);bf=_8.Temperature+"°";be=a.ofArray([d.Tags().text(bf)]);_9=a.ofArray([d.Tags().NewTag("td",_),d.Tags().NewTag("td",bb),d.Tags().NewTag("td",be)]);return d.Tags().NewTag("tr",_9);},_6);bj="wi "+_5.Current.WeatherIcon;bi=a.ofArray([f.Attr().NewAttr("class",bj)]);bh=a.ofArray([d.Tags().NewTag("i",bi)]);bl=_5.Current.Temperature+"°";bk=a.ofArray([d.Tags().text(bl)]);bg=a.ofArray([d.Tags().NewTag("h1",bh),d.Tags().NewTag("h4",bk)]);_4["HtmlProvider@33"].Clear(_4.get_Body());br=a.ofArray([d.Tags().text("Hour")]);bs=a.ofArray([d.Tags().text("Weather")]);bt=a.ofArray([d.Tags().text("Temperature")]);bq=a.ofArray([d.Tags().NewTag("th",br),d.Tags().NewTag("th",bs),d.Tags().NewTag("th",bt)]);bp=a.ofArray([d.Tags().NewTag("tr",bq)]);bo=a.append(a.singleton(d.Tags().NewTag("thead",bp)),_7);bn=a.ofArray([e.add(d.Tags().NewTag("div",bg),a.ofArray([f.Attr().NewAttr("class","panel-heading")])),e.add(d.Tags().NewTag("table",bo),a.ofArray([f.Attr().NewAttr("class","table")]))]);bm=a.ofArray([e.add(d.Tags().NewTag("div",bn),a.ofArray([f.Attr().NewAttr("class","panel panel-default")]))]);return _4.AppendI(e.add(d.Tags().NewTag("div",bm),a.ofArray([f.Attr().NewAttr("class","col-md-6")])));};});}}}});$.OnInit(function(){a=$.Safe($$.WebSharper.List);b=$.Safe($$.WebSharper.Html);c=$.Safe(b.Client);d=$.Safe(c.Tags);e=$.Safe(c.Operators);f=$.Safe(c.Attr);g=$.Safe($$.WebSharper.Remoting);h=$.Safe(g.AjaxRemotingProvider);i=$.Safe($$.MorningDashboard);j=$.Safe(i.Client);k=$.Safe(a.T);l=$.Safe($$.WebSharper.Concurrency);return m=$.Safe($$.setInterval);});$.OnLoad(function(){return;});}());
