(function(){var $$=this,$=this.IntelliFactory.Runtime,a,b,c,d,e,f,g,h,i,j,k,l,m,n;$.Define($$,{MorningDashboard:{Client:{calendarBlock:function(){return b.refreshBlock(15*60,function(){return d.Async("MorningDashboard:0",[]);},function(p){return function(q){var r,s,F,G,H,I,J;r=q.Calendars;s=e.map(function(t){var u,v,C,D,E;u=t.Instances;v=e.map(function(w){var x,y,z,A,B;z=w.Event;y=e.ofArray([h.Tags().text(z)]);B=w.Time;A=e.ofArray([h.Tags().text(B)]);x=e.ofArray([h.Tags().NewTag("td",y),h.Tags().NewTag("td",A)]);return h.Tags().NewTag("tr",x);},u);E=t.Name;D=e.ofArray([h.Tags().text(E)]);C=e.ofArray([h.Tags().NewTag("h5",D)]);return e.ofArray([i.add(h.Tags().NewTag("div",C),e.ofArray([j.Attr().NewAttr("class","panel-body")])),i.add(h.Tags().NewTag("table",v),e.ofArray([j.Attr().NewAttr("class","table")]))]);},r);F=e.concat(s);p["HtmlProvider@33"].Clear(p.get_Body());J=e.ofArray([h.Tags().text("Daily events")]);I=e.ofArray([h.Tags().NewTag("h4",J)]);H=e.append(e.singleton(i.add(h.Tags().NewTag("div",I),e.ofArray([j.Attr().NewAttr("class","panel-heading")]))),F);G=e.ofArray([i.add(h.Tags().NewTag("div",H),e.ofArray([j.Attr().NewAttr("class","panel panel-default")]))]);return p.AppendI(i.add(h.Tags().NewTag("div",G),e.ofArray([j.Attr().NewAttr("class","col-md-6")])));};});},currentTimeBlock:function(){var K,_0;K=function(L){return function(M){var N,O,P,Q,R,S,T,U,V,W,X,Y,Z;L["HtmlProvider@33"].Clear(L.get_Body());Q=e.ofArray([h.Tags().text("Time and date")]);P=e.ofArray([h.Tags().NewTag("h4",Q)]);U=M.Time;T=e.ofArray([h.Tags().text(U)]);S=e.ofArray([h.Tags().NewTag("h1",T)]);X=M.Weekday;W=e.ofArray([h.Tags().text(X)]);Z=M.Month+" "+M.Day;Y=e.ofArray([h.Tags().text(Z)]);V=e.ofArray([h.Tags().NewTag("h4",W),h.Tags().NewTag("h4",Y)]);R=e.ofArray([i.add(h.Tags().NewTag("div",S),e.ofArray([j.Attr().NewAttr("class","col-md-6")])),i.add(h.Tags().NewTag("div",V),e.ofArray([j.Attr().NewAttr("class","col-md-6")]))]);O=e.ofArray([i.add(h.Tags().NewTag("div",P),e.ofArray([j.Attr().NewAttr("class","panel-heading")])),i.add(h.Tags().NewTag("div",R),e.ofArray([j.Attr().NewAttr("class","panel-body")]))]);N=e.ofArray([i.add(h.Tags().NewTag("div",O),e.ofArray([j.Attr().NewAttr("class","panel panel-default")]))]);return L.AppendI(i.add(h.Tags().NewTag("div",N),e.ofArray([j.Attr().NewAttr("class","col-md-6")])));};};_0=function(){return d.Async("MorningDashboard:1",[]);};return b.refreshBlock(5,_0,K);},oneBusAwayBlock:function(){var _2,bs;_2=function(_3){return function(_4){var _5,bm,bn,bo,bp,bq,br;_5=function(_6){var _7,_8,_9,_,bg,bh,bi,bj,bk,bl;_7=[_6.RouteTitle,_6.Arrivals];_8=_7[0];_9=_7[1];_=function(ba){var bb,bc,bd,be,bf;bd=ba.Time;bc=e.ofArray([h.Tags().text(bd)]);bf=ba.TimeUntil;be=e.ofArray([h.Tags().text(bf)]);bb=e.ofArray([h.Tags().NewTag("td",bc),h.Tags().NewTag("td",be)]);return h.Tags().NewTag("tr",bb);};bg=e.map(_,_9);bi=e.ofArray([h.Tags().text(_8)]);bh=e.ofArray([h.Tags().NewTag("h5",bi)]);if(k.length(_9)>0){bj=i.add(h.Tags().NewTag("table",bg),e.ofArray([j.Attr().NewAttr("class","table")]));}else{bl=e.ofArray([h.Tags().text("No upcoming arrivals")]);bk=e.ofArray([i.add(h.Tags().NewTag("li",bl),e.ofArray([j.Attr().NewAttr("class","list-group-item")]))]);bj=i.add(h.Tags().NewTag("ul",bk),e.ofArray([j.Attr().NewAttr("class","list-group")]));}return e.ofArray([i.add(h.Tags().NewTag("div",bh),e.ofArray([j.Attr().NewAttr("class","panel-body")])),bj]);};bm=e.map(_5,_4);bn=e.concat(bm);_3["HtmlProvider@33"].Clear(_3.get_Body());br=e.ofArray([h.Tags().text("Commute")]);bq=e.ofArray([h.Tags().NewTag("h4",br)]);bp=e.append(e.singleton(i.add(h.Tags().NewTag("div",bq),e.ofArray([j.Attr().NewAttr("class","panel-heading")]))),bn);bo=e.ofArray([i.add(h.Tags().NewTag("div",bp),e.ofArray([j.Attr().NewAttr("class","panel panel-default")]))]);return _3.AppendI(i.add(h.Tags().NewTag("div",bo),e.ofArray([j.Attr().NewAttr("class","col-md-6")])));};};bs=function(){return d.Async("MorningDashboard:3",[]);};return b.refreshBlock(15,bs,_2);},refreshBlock:function(bt,bu,bv){var bw,bx,by,bF,bG;bw=$.New(l,{$:0});bx=h.Tags().NewTag("div",bw);by=function(bz){var bA;bA=m.Delay(function(){return m.Bind(bu(null),function(bC){var bD,bE;if(bC.$==1){bE=bC.$0;(bv(bz))(bE);bD=m.Return(null);}else{bD=m.Return(null);}return bD;});});return m.Start(bA,{$:0});};by(bx);bG=function(){var bI;bI=n(function(){return by(bx);},bt*1000);return;};i.OnBeforeRender(bG,bx);bF=e.ofArray([bx]);return h.Tags().NewTag("div",bF);},wundergroundBlock:function(){var bK,b$;bK=function(bL){return function(bM){var bN,bO,bY,bZ,b0,b1,b2,b3,b4,b5,b6,b7,b8,b9,b_;bN=bM.Forecast;bO=function(bP){var bQ,bR,bS,bT,bU,bV,bW,bX;bS=bP.Time;bR=e.ofArray([h.Tags().text(bS)]);bV="wi "+bP.WeatherIcon;bU=e.ofArray([j.Attr().NewAttr("class",bV)]);bT=e.ofArray([h.Tags().NewTag("i",bU)]);bX=bP.Temperature+"°";bW=e.ofArray([h.Tags().text(bX)]);bQ=e.ofArray([h.Tags().NewTag("td",bR),h.Tags().NewTag("td",bT),h.Tags().NewTag("td",bW)]);return h.Tags().NewTag("tr",bQ);};bY=e.map(bO,bN);b3="wi "+bM.Current.WeatherIcon;b2=e.ofArray([j.Attr().NewAttr("class",b3)]);b1=e.ofArray([h.Tags().NewTag("i",b2)]);b0=e.ofArray([h.Tags().NewTag("h1",b1)]);b6=bM.Current.Temperature+"°";b5=e.ofArray([h.Tags().text(b6)]);b4=e.ofArray([h.Tags().NewTag("h4",b5)]);bZ=e.ofArray([i.add(h.Tags().NewTag("div",b0),e.ofArray([j.Attr().NewAttr("class","col-md-6")])),i.add(h.Tags().NewTag("div",b4),e.ofArray([j.Attr().NewAttr("class","col-md-6")]))]);bL["HtmlProvider@33"].Clear(bL.get_Body());b_=e.ofArray([h.Tags().text("Weather")]);b9=e.ofArray([h.Tags().NewTag("h4",b_)]);b8=e.ofArray([i.add(h.Tags().NewTag("div",b9),e.ofArray([j.Attr().NewAttr("class","panel-heading")])),i.add(h.Tags().NewTag("div",bZ),e.ofArray([j.Attr().NewAttr("class","panel-body")])),i.add(h.Tags().NewTag("table",bY),e.ofArray([j.Attr().NewAttr("class","table")]))]);b7=e.ofArray([i.add(h.Tags().NewTag("div",b8),e.ofArray([j.Attr().NewAttr("class","panel panel-default")]))]);return bL.AppendI(i.add(h.Tags().NewTag("div",b7),e.ofArray([j.Attr().NewAttr("class","col-md-6")])));};};b$=function(){return d.Async("MorningDashboard:2",[]);};return b.refreshBlock(60*15,b$,bK);}}}});$.OnInit(function(){a=$.Safe($$.MorningDashboard);b=$.Safe(a.Client);c=$.Safe($$.WebSharper.Remoting);d=$.Safe(c.AjaxRemotingProvider);e=$.Safe($$.WebSharper.List);f=$.Safe($$.WebSharper.Html);g=$.Safe(f.Client);h=$.Safe(g.Tags);i=$.Safe(g.Operators);j=$.Safe(g.Attr);k=$.Safe($$.WebSharper.Seq);l=$.Safe(e.T);m=$.Safe($$.WebSharper.Concurrency);return n=$.Safe($$.setInterval);});$.OnLoad(function(){return;});}());
