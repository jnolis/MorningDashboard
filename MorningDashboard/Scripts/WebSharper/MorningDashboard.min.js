(function(){var $$=this,$=this.IntelliFactory.Runtime,a,b,c,d,e,f,g,h,i,j,k,l,m;$.Define($$,{MorningDashboard:{Client:{calendarBlock:function(){return b.refreshBlock(15*60,function(){return d.Async("MorningDashboard:0",[]);},function(o){return function(p){var q,r,A,B,C,D,E,F,G,H,I,J,K;q=p.Instances;r=e.map(function(s){var t,u,v,w,x,y,z;v=s.Calendar;u=e.ofArray([h.Tags().text(v)]);x=s.Event;w=e.ofArray([h.Tags().text(x)]);z=s.Time;y=e.ofArray([h.Tags().text(z)]);t=e.ofArray([h.Tags().NewTag("td",u),h.Tags().NewTag("td",w),h.Tags().NewTag("td",y)]);return h.Tags().NewTag("tr",t);},q);o["HtmlProvider@33"].Clear(o.get_Body());E=p.Title;D=e.ofArray([h.Tags().text(E)]);C=e.ofArray([h.Tags().NewTag("h4",D)]);I=e.ofArray([h.Tags().text("Calendar")]);J=e.ofArray([h.Tags().text("Event")]);K=e.ofArray([h.Tags().text("Time")]);H=e.ofArray([h.Tags().NewTag("th",I),h.Tags().NewTag("th",J),h.Tags().NewTag("th",K)]);G=e.ofArray([h.Tags().NewTag("tr",H)]);F=e.append(e.singleton(h.Tags().NewTag("thead",G)),r);B=e.ofArray([i.add(h.Tags().NewTag("div",C),e.ofArray([j.Attr().NewAttr("class","panel-heading")])),i.add(h.Tags().NewTag("table",F),e.ofArray([j.Attr().NewAttr("class","table")]))]);A=e.ofArray([i.add(h.Tags().NewTag("div",B),e.ofArray([j.Attr().NewAttr("class","panel panel-default")]))]);return o.AppendI(i.add(h.Tags().NewTag("div",A),e.ofArray([j.Attr().NewAttr("class","col-md-6")])));};});},currentTimeBlock:function(){var L,X;L=function(M){return function(N){var O,P,Q,R,S,T,U,V,W;M["HtmlProvider@33"].Clear(M.get_Body());Q=e.ofArray([h.Tags().text("Time")]);S=N.Time;R=e.ofArray([h.Tags().text(S)]);U=N.Weekday;T=e.ofArray([h.Tags().text(U)]);W=N.Month+" "+N.Day;V=e.ofArray([h.Tags().text(W)]);P=e.ofArray([i.add(h.Tags().NewTag("div",Q),e.ofArray([j.Attr().NewAttr("class","panel-heading")])),h.Tags().NewTag("h2",R),h.Tags().NewTag("h4",T),h.Tags().NewTag("h4",V)]);O=e.ofArray([i.add(h.Tags().NewTag("div",P),e.ofArray([j.Attr().NewAttr("class","panel panel-default")]))]);return M.AppendI(i.add(h.Tags().NewTag("div",O),e.ofArray([j.Attr().NewAttr("class","col-md-6")])));};};X=function(){return d.Async("MorningDashboard:1",[]);};return b.refreshBlock(5,X,L);},oneBusAwayBlock:function(){var Z,bl;Z=function(_0){return function(_1){var _2,_3,_4,_5,bb,bc,bd,be,bf,bg,bh,bi,bj,bk;_2=[_1.RouteTitle,_1.Arrivals];_3=_2[0];_4=_2[1];_5=function(_6){var _7,_8,_9,_,ba;_9=_6.Time;_8=e.ofArray([h.Tags().text(_9)]);ba=_6.TimeUntil;_=e.ofArray([h.Tags().text(ba)]);_7=e.ofArray([h.Tags().NewTag("td",_8),h.Tags().NewTag("td",_)]);return h.Tags().NewTag("tr",_7);};bb=e.map(_5,_4);_0["HtmlProvider@33"].Clear(_0.get_Body());bf=e.ofArray([h.Tags().text(_3)]);be=e.ofArray([h.Tags().NewTag("h4",bf)]);bj=e.ofArray([h.Tags().text("ETA")]);bk=e.ofArray([h.Tags().text("Minutes")]);bi=e.ofArray([h.Tags().NewTag("th",bj),h.Tags().NewTag("th",bk)]);bh=e.ofArray([h.Tags().NewTag("tr",bi)]);bg=e.append(e.singleton(h.Tags().NewTag("thead",bh)),bb);bd=e.ofArray([i.add(h.Tags().NewTag("div",be),e.ofArray([j.Attr().NewAttr("class","panel-heading")])),i.add(h.Tags().NewTag("table",bg),e.ofArray([j.Attr().NewAttr("class","table")]))]);bc=e.ofArray([i.add(h.Tags().NewTag("div",bd),e.ofArray([j.Attr().NewAttr("class","panel panel-default")]))]);return _0.AppendI(i.add(h.Tags().NewTag("div",bc),e.ofArray([j.Attr().NewAttr("class","col-md-6")])));};};bl=function(){return d.Async("MorningDashboard:3",[]);};return b.refreshBlock(15,bl,Z);},refreshBlock:function(bm,bn,bo){var bp,bq,br,by,bz;bp=$.New(k,{$:0});bq=h.Tags().NewTag("div",bp);br=function(bs){var bt;bt=l.Delay(function(){return l.Bind(bn(null),function(bv){var bw,bx;if(bv.$==1){bx=bv.$0;(bo(bs))(bx);bw=l.Return(null);}else{bw=l.Return(null);}return bw;});});return l.Start(bt,{$:0});};br(bq);bz=function(){var bB;bB=m(function(){return br(bq);},bm*1000);return;};i.OnBeforeRender(bz,bq);by=e.ofArray([bq]);return h.Tags().NewTag("div",by);},wundergroundBlock:function(){var bD,b6;bD=function(bE){return function(bF){var bG,bH,bR,bS,bT,bU,bV,bW,bX,bY,bZ,b0,b1,b2,b3,b4,b5;bG=bF.Forecast;bH=function(bI){var bJ,bK,bL,bM,bN,bO,bP,bQ;bL=bI.Time;bK=e.ofArray([h.Tags().text(bL)]);bO="wi "+bI.WeatherIcon;bN=e.ofArray([j.Attr().NewAttr("class",bO)]);bM=e.ofArray([h.Tags().NewTag("i",bN)]);bQ=bI.Temperature+"°";bP=e.ofArray([h.Tags().text(bQ)]);bJ=e.ofArray([h.Tags().NewTag("td",bK),h.Tags().NewTag("td",bM),h.Tags().NewTag("td",bP)]);return h.Tags().NewTag("tr",bJ);};bR=e.map(bH,bG);bV="wi "+bF.Current.WeatherIcon;bU=e.ofArray([j.Attr().NewAttr("class",bV)]);bT=e.ofArray([h.Tags().NewTag("i",bU)]);bX=bF.Current.Temperature+"°";bW=e.ofArray([h.Tags().text(bX)]);bS=e.ofArray([h.Tags().NewTag("h1",bT),h.Tags().NewTag("h4",bW)]);bE["HtmlProvider@33"].Clear(bE.get_Body());b3=e.ofArray([h.Tags().text("Hour")]);b4=e.ofArray([h.Tags().text("Weather")]);b5=e.ofArray([h.Tags().text("Temperature")]);b2=e.ofArray([h.Tags().NewTag("th",b3),h.Tags().NewTag("th",b4),h.Tags().NewTag("th",b5)]);b1=e.ofArray([h.Tags().NewTag("tr",b2)]);b0=e.append(e.singleton(h.Tags().NewTag("thead",b1)),bR);bZ=e.ofArray([i.add(h.Tags().NewTag("div",bS),e.ofArray([j.Attr().NewAttr("class","panel-heading")])),i.add(h.Tags().NewTag("table",b0),e.ofArray([j.Attr().NewAttr("class","table")]))]);bY=e.ofArray([i.add(h.Tags().NewTag("div",bZ),e.ofArray([j.Attr().NewAttr("class","panel panel-default")]))]);return bE.AppendI(i.add(h.Tags().NewTag("div",bY),e.ofArray([j.Attr().NewAttr("class","col-md-6")])));};};b6=function(){return d.Async("MorningDashboard:2",[]);};return b.refreshBlock(60*15,b6,bD);}}}});$.OnInit(function(){a=$.Safe($$.MorningDashboard);b=$.Safe(a.Client);c=$.Safe($$.WebSharper.Remoting);d=$.Safe(c.AjaxRemotingProvider);e=$.Safe($$.WebSharper.List);f=$.Safe($$.WebSharper.Html);g=$.Safe(f.Client);h=$.Safe(g.Tags);i=$.Safe(g.Operators);j=$.Safe(g.Attr);k=$.Safe(e.T);l=$.Safe($$.WebSharper.Concurrency);return m=$.Safe($$.setInterval);});$.OnLoad(function(){return;});}());
