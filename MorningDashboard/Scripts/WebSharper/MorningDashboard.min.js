(function(){var $$=this,$=this.IntelliFactory.Runtime,a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p;$.Define($$,{MorningDashboard:{Client:{calendarBlock:function(){var q,P;q=function(r){return function(s){var t,u,K,L,M,N,O;t=s.Calendars;u=function(v){var w,x,G,H,I,J;w=v.Instances;x=function(y){var z,A,B,C,D,E,F;B=y.Domain;A=a.ofArray([e.Tags().text(B)]);D=y.Event;C=a.ofArray([e.Tags().text(D)]);F=y.Time;E=a.ofArray([e.Tags().text(F)]);z=a.ofArray([d.add(e.Tags().NewTag("td",A),a.ofArray([f.Attr().NewAttr("class","col-md-3")])),d.add(e.Tags().NewTag("td",C),a.ofArray([f.Attr().NewAttr("class","col-md-5")])),d.add(e.Tags().NewTag("td",E),a.ofArray([f.Attr().NewAttr("class","col-md-4")]))]);return e.Tags().NewTag("tr",z);};G=a.map(x,w);J=v.Name;I=a.ofArray([e.Tags().text(J)]);H=a.ofArray([d.add(e.Tags().NewTag("h5",I),a.ofArray([f.Attr().NewAttr("class","text-primary")]))]);return a.ofArray([d.add(e.Tags().NewTag("div",H),a.ofArray([f.Attr().NewAttr("class","panel-body")])),g.length(v.Instances)>0?d.add(e.Tags().NewTag("table",G),a.ofArray([f.Attr().NewAttr("class","table table-condensed")])):i.emptyTable("No events today")]);};K=a.map(u,t);L=a.concat(K);r["HtmlProvider@33"].Clear(r.get_Body());O=a.ofArray([e.Tags().text("Calendar")]);N=a.ofArray([e.Tags().NewTag("h4",O)]);M=a.append(a.singleton(d.add(e.Tags().NewTag("div",N),a.ofArray([f.Attr().NewAttr("class","panel-heading")]))),L);return r.AppendI(d.add(e.Tags().NewTag("div",M),a.ofArray([f.Attr().NewAttr("class","panel panel-default")])));};};P=function(){return k.Async("MorningDashboard:1",[]);};return i.refreshBlock("calendarBlock",15*60,$.New(l,{$:0}),P,q);},commuteBlock:function(){var R,br;R=function(S){return function(T){var U,bm,bn,bo,bp,bq;U=function(V){var W,X,Y,Z,_0,_1,_2,_3,_4,_5,_6,_7,_8,_9,_,ba,bj,bk,bl;if(V.$==1){X=V.$0;_0=X.RouteTitle;Z=a.ofArray([e.Tags().text(_0)]);Y=a.ofArray([d.add(e.Tags().NewTag("h5",Z),a.ofArray([f.Attr().NewAttr("class","text-primary")]))]);_4=X.Time;_3=a.ofArray([e.Tags().text(_4)]);_6="("+X.TrafficTime+" w/ traffic)";_5=a.ofArray([e.Tags().text(_6)]);_2=a.ofArray([d.add(e.Tags().NewTag("td",_3),a.ofArray([f.Attr().NewAttr("class","col-md-4")])),d.add(e.Tags().NewTag("td",_5),a.ofArray([f.Attr().NewAttr("class","col-md-8")]))]);_1=a.ofArray([e.Tags().NewTag("tr",_2)]);W=a.ofArray([d.add(e.Tags().NewTag("div",Y),a.ofArray([f.Attr().NewAttr("class","panel-body")])),d.add(e.Tags().NewTag("table",_1),a.ofArray([f.Attr().NewAttr("class","table table-condensed")]))]);}else{_7=V.$0;_8=[_7.RouteTitle,_7.Arrivals];_9=_8[0];_=_8[1];ba=function(bb){var bc,bd,be,bf,bg,bh,bi;be=bb.Time;bd=a.ofArray([e.Tags().text(be)]);bg=bb.Name;bf=a.ofArray([e.Tags().text(bg)]);bi=bb.TimeUntil;bh=a.ofArray([e.Tags().text(bi)]);bc=a.ofArray([d.add(e.Tags().NewTag("td",bd),a.ofArray([f.Attr().NewAttr("class","col-md-5")])),d.add(e.Tags().NewTag("td",bf),a.ofArray([f.Attr().NewAttr("class","col-md-3")])),d.add(e.Tags().NewTag("td",bh),a.ofArray([f.Attr().NewAttr("class","col-md-4"+(bb.Accent?" text-warning":""))]))]);return e.Tags().NewTag("tr",bc);};bj=a.map(ba,_);bl=a.ofArray([e.Tags().text(_9)]);bk=a.ofArray([d.add(e.Tags().NewTag("h5",bl),a.ofArray([f.Attr().NewAttr("class","text-primary")]))]);W=a.ofArray([d.add(e.Tags().NewTag("div",bk),a.ofArray([f.Attr().NewAttr("class","panel-body")])),g.length(_)>0?d.add(e.Tags().NewTag("table",bj),a.ofArray([f.Attr().NewAttr("class","table table-condensed")])):i.emptyTable("No upcoming arrivals")]);}return W;};bm=a.map(U,T);bn=a.concat(bm);S["HtmlProvider@33"].Clear(S.get_Body());bq=a.ofArray([e.Tags().text("Commute")]);bp=a.ofArray([e.Tags().NewTag("h4",bq)]);bo=a.append(a.singleton(d.add(e.Tags().NewTag("div",bp),a.ofArray([f.Attr().NewAttr("class","panel-heading")]))),bn);return S.AppendI(d.add(e.Tags().NewTag("div",bo),a.ofArray([f.Attr().NewAttr("class","panel panel-default")])));};};br=function(){return k.Async("MorningDashboard:4",[]);};return i.refreshBlock("commuteBlock",5,$.New(l,{$:0}),br,R);},currentTimeBlock:function(){var bs,bD;bs=function(bt){return function(bu){var bv,bw,bx,by,bz,bA,bB,bC;bt["HtmlProvider@33"].Clear(bt.get_Body());by=bu.Time;bx=a.ofArray([e.Tags().text(by)]);bA=bu.Weekday;bz=a.ofArray([e.Tags().text(bA)]);bC=bu.Month+" "+bu.Day;bB=a.ofArray([e.Tags().text(bC)]);bw=a.ofArray([d.add(e.Tags().NewTag("h1",bx),a.ofArray([f.Attr().NewAttr("class","text-primary highlight-small")])),d.add(e.Tags().NewTag("h4",bz),a.ofArray([f.Attr().NewAttr("class","text-primary")])),d.add(e.Tags().NewTag("h4",bB),a.ofArray([f.Attr().NewAttr("class","text-primary")]))]);bv=a.ofArray([d.add(e.Tags().NewTag("div",bw),a.ofArray([f.Attr().NewAttr("class","panel-body text-center")]))]);return bt.AppendI(d.add(e.Tags().NewTag("div",bv),a.ofArray([f.Attr().NewAttr("class","panel panel-default")])));};};bD=function(){return k.Async("MorningDashboard:2",[]);};return i.refreshBlock("currentTimeBlock",5,$.New(l,{$:0}),bD,bs);},emptyTable:function(bF){var bG,bH,bI;bI=a.ofArray([e.Tags().text(bF)]);bH=a.ofArray([e.Tags().NewTag("td",bI)]);bG=a.ofArray([e.Tags().NewTag("tr",bH)]);return d.add(e.Tags().NewTag("table",bG),a.ofArray([f.Attr().NewAttr("class","table")]));},refreshBlock:function(bJ,bK,bL,bM,bN){var bO,bP,bW;bO=d.add(e.Tags().NewTag("div",bL),a.ofArray([f.Attr().NewAttr("id",bJ)]));bP=function(bQ){var bR;bR=m.Delay(function(){return m.Bind(bM(null),function(bT){var bU,bV;if(bT.$==1){bV=bT.$0;(bN(bQ))(bV);bU=m.Return(null);}else{bU=m.Return(null);}return bU;});});return m.Start(bR,{$:0});};bP(bO);bW=function(){var bY;bY=n(function(){return bP(bO);},bK*1000);return;};d.OnBeforeRender(bW,bO);return bO;},trafficMapBlock:function(){var b0,b3,b4,b5,b6;b0=function(){return m.Delay(function(){return m.Return({$:1,$0:null});});};b5=a.ofArray([e.Tags().text("Traffic")]);b4=a.ofArray([e.Tags().NewTag("h4",b5)]);b6=a.ofArray([f.Attr().NewAttr("id","trafficMap"),f.Attr().NewAttr("class","map")]);b3=a.ofArray([d.add(e.Tags().NewTag("div",b4),a.ofArray([f.Attr().NewAttr("class","panel-heading")])),e.Tags().NewTag("div",b6)]);return i.refreshBlock("trafficMapBlock",10*60,a.ofArray([d.add(e.Tags().NewTag("div",b3),a.ofArray([f.Attr().NewAttr("class","panel panel-default")]))]),b0,function(){return function(){return o("trafficMap").ready(p.createMap.call(null,"trafficMap"));};});},twitterBlock:function(){var b9,co;b9=function(b_){return function(b$){var ca,cb,cg,ch,ci,cj,ck,cl,cm,cn;ca=b$.Tweets;cb=function(cc){var cd,ce,cf;cf=cc.Username+": "+cc.Text;ce=a.ofArray([e.Tags().text(cf)]);cd=a.ofArray([e.Tags().NewTag("td",ce)]);return e.Tags().NewTag("tr",cd);};cg=a.map(cb,ca);ck=b$.Title;cj=a.ofArray([e.Tags().text(ck)]);ci=a.ofArray([d.add(e.Tags().NewTag("h5",cj),a.ofArray([f.Attr().NewAttr("class","text-primary")]))]);ch=a.ofArray([d.add(e.Tags().NewTag("div",ci),a.ofArray([f.Attr().NewAttr("class","panel-body")])),g.length(cg)>0?d.add(e.Tags().NewTag("table",cg),a.ofArray([f.Attr().NewAttr("class","table table-condensed")])):i.emptyTable("No tweets available")]);b_["HtmlProvider@33"].Clear(b_.get_Body());cn=a.ofArray([e.Tags().text("Recent Tweets")]);cm=a.ofArray([e.Tags().NewTag("h4",cn)]);cl=a.append(a.singleton(d.add(e.Tags().NewTag("div",cm),a.ofArray([f.Attr().NewAttr("class","panel-heading")]))),ch);return b_.AppendI(d.add(e.Tags().NewTag("div",cl),a.ofArray([f.Attr().NewAttr("class","panel panel-default")])));};};co=function(){return k.Async("MorningDashboard:0",[]);};return i.refreshBlock("twitterBlock",10,$.New(l,{$:0}),co,b9);},wundergroundBlock:function(){var cq,cT;cq=function(cr){return function(cs){var ct,cu,cD,cE,cF,cG,cH,cI,cJ,cK,cL,cM,cN,cO,cP,cQ,cR,cS;ct=cs.Forecast;cu=function(cv){var cw,cx,cy,cz,cA,cB,cC;cy=cv.Time;cx=a.ofArray([e.Tags().text(cy)]);cA=a.ofArray([f.Attr().NewAttr("class","wi "+cv.WeatherIcon+(cv.Accent?" text-warning":""))]);cz=a.ofArray([e.Tags().NewTag("i",cA)]);cC=cv.Temperature+"째";cB=a.ofArray([e.Tags().text(cC)]);cw=a.ofArray([e.Tags().NewTag("td",cx),e.Tags().NewTag("td",cz),e.Tags().NewTag("td",cB)]);return e.Tags().NewTag("tr",cw);};cD=a.map(cu,ct);cI="weather wi "+cs.Current.WeatherIcon;cH=a.ofArray([f.Attr().NewAttr("class",cI)]);cG=a.ofArray([e.Tags().NewTag("i",cH)]);cF=a.ofArray([d.add(e.Tags().NewTag("h1",cG),a.ofArray([f.Attr().NewAttr("class","highlight "+(cs.Current.Accent?"text-warning":"text-primary"))]))]);cL="Now: "+cs.Current.Temperature+"째";cK=a.ofArray([e.Tags().text(cL)]);cN="High: "+cs.Current.High+"째";cM=a.ofArray([e.Tags().text(cN)]);cP="Low: "+cs.Current.Low+"째";cO=a.ofArray([e.Tags().text(cP)]);cJ=a.ofArray([d.add(e.Tags().NewTag("h4",cK),a.ofArray([f.Attr().NewAttr("class","text-primary")])),d.add(e.Tags().NewTag("h4",cM),a.ofArray([f.Attr().NewAttr("class","text-primary")])),d.add(e.Tags().NewTag("h4",cO),a.ofArray([f.Attr().NewAttr("class","text-primary")]))]);cE=a.ofArray([d.add(e.Tags().NewTag("div",cF),a.ofArray([f.Attr().NewAttr("class","col-md-5 text-center")])),d.add(e.Tags().NewTag("div",cJ),a.ofArray([f.Attr().NewAttr("class","col-md-7")]))]);cr["HtmlProvider@33"].Clear(cr.get_Body());cS=a.ofArray([e.Tags().text("Weather")]);cR=a.ofArray([e.Tags().NewTag("h4",cS)]);cQ=a.ofArray([d.add(e.Tags().NewTag("div",cR),a.ofArray([f.Attr().NewAttr("class","panel-heading")])),d.add(e.Tags().NewTag("div",cE),a.ofArray([f.Attr().NewAttr("class","panel-body")])),d.add(e.Tags().NewTag("table",cD),a.ofArray([f.Attr().NewAttr("class","table table-condensed")]))]);return cr.AppendI(d.add(e.Tags().NewTag("div",cQ),a.ofArray([f.Attr().NewAttr("class","panel panel-default")])));};};cT=function(){return k.Async("MorningDashboard:3",[]);};return i.refreshBlock("wundergroundBlock",60*15,$.New(l,{$:0}),cT,cq);}}}});$.OnInit(function(){a=$.Safe($$.WebSharper.List);b=$.Safe($$.WebSharper.Html);c=$.Safe(b.Client);d=$.Safe(c.Operators);e=$.Safe(c.Tags);f=$.Safe(c.Attr);g=$.Safe($$.WebSharper.Seq);h=$.Safe($$.MorningDashboard);i=$.Safe(h.Client);j=$.Safe($$.WebSharper.Remoting);k=$.Safe(j.AjaxRemotingProvider);l=$.Safe(a.T);m=$.Safe($$.WebSharper.Concurrency);n=$.Safe($$.setInterval);o=$.Safe($$.jQuery);return p=$.Safe($$.window);});$.OnLoad(function(){return;});}());
