(function(){var $$=this,$=this.IntelliFactory.Runtime,a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p;$.Define($$,{MorningDashboard:{Client:{calendarBlock:function(){var q,P;q=function(r){return function(s){var t,u,K,L,M,N,O;t=s.Calendars;u=function(v){var w,x,G,H,I,J;w=v.Instances;x=function(y){var z,A,B,C,D,E,F;B=y.Domain;A=a.ofArray([e.Tags().text(B)]);D=y.Event;C=a.ofArray([e.Tags().text(D)]);F=y.Time;E=a.ofArray([e.Tags().text(F)]);z=a.ofArray([d.add(e.Tags().NewTag("td",A),a.ofArray([f.Attr().NewAttr("class","col-md-3")])),d.add(e.Tags().NewTag("td",C),a.ofArray([f.Attr().NewAttr("class","col-md-5")])),d.add(e.Tags().NewTag("td",E),a.ofArray([f.Attr().NewAttr("class","col-md-4")]))]);return e.Tags().NewTag("tr",z);};G=a.map(x,w);J=v.Name;I=a.ofArray([e.Tags().text(J)]);H=a.ofArray([d.add(e.Tags().NewTag("h5",I),a.ofArray([f.Attr().NewAttr("class","accent-text")]))]);return a.ofArray([d.add(e.Tags().NewTag("div",H),a.ofArray([f.Attr().NewAttr("class","panel-body")])),g.length(v.Instances)>0?d.add(e.Tags().NewTag("table",G),a.ofArray([f.Attr().NewAttr("class","table")])):i.emptyTable("No events today")]);};K=a.map(u,t);L=a.concat(K);r["HtmlProvider@33"].Clear(r.get_Body());O=a.ofArray([e.Tags().text("Daily events")]);N=a.ofArray([e.Tags().NewTag("h4",O)]);M=a.append(a.singleton(d.add(e.Tags().NewTag("div",N),a.ofArray([f.Attr().NewAttr("class","panel-heading")]))),L);return r.AppendI(d.add(e.Tags().NewTag("div",M),a.ofArray([f.Attr().NewAttr("class","panel panel-default")])));};};P=function(){return k.Async("MorningDashboard:1",[]);};return i.refreshBlock("calendarBlock",15*60,$.New(l,{$:0}),P,q);},currentTimeBlock:function(){var R,_2;R=function(S){return function(T){var U,V,W,X,Y,Z,_0,_1;S["HtmlProvider@33"].Clear(S.get_Body());X=T.Time;W=a.ofArray([e.Tags().text(X)]);Z=T.Weekday;Y=a.ofArray([e.Tags().text(Z)]);_1=T.Month+" "+T.Day;_0=a.ofArray([e.Tags().text(_1)]);V=a.ofArray([d.add(e.Tags().NewTag("h1",W),a.ofArray([f.Attr().NewAttr("class","accent-text highlight-small")])),d.add(e.Tags().NewTag("h4",Y),a.ofArray([f.Attr().NewAttr("class","accent-text")])),d.add(e.Tags().NewTag("h4",_0),a.ofArray([f.Attr().NewAttr("class","accent-text")]))]);U=a.ofArray([d.add(e.Tags().NewTag("div",V),a.ofArray([f.Attr().NewAttr("class","panel-body text-center")]))]);return S.AppendI(d.add(e.Tags().NewTag("div",U),a.ofArray([f.Attr().NewAttr("class","panel panel-default")])));};};_2=function(){return k.Async("MorningDashboard:2",[]);};return i.refreshBlock("currentTimeBlock",5,$.New(l,{$:0}),_2,R);},emptyTable:function(_4){var _5,_6,_7;_7=a.ofArray([e.Tags().text(_4)]);_6=a.ofArray([e.Tags().NewTag("td",_7)]);_5=a.ofArray([e.Tags().NewTag("tr",_6)]);return d.add(e.Tags().NewTag("table",_5),a.ofArray([f.Attr().NewAttr("class","table")]));},oneBusAwayBlock:function(){var _8,bu;_8=function(_9){return function(_){var ba,bp,bq,br,bs,bt;ba=function(bb){var bc,bd,be,bf,bm,bn,bo;bc=[bb.RouteTitle,bb.Arrivals];bd=bc[0];be=bc[1];bf=function(bg){var bh,bi,bj,bk,bl;bj=bg.Time;bi=a.ofArray([e.Tags().text(bj)]);bl=bg.TimeUntil;bk=a.ofArray([e.Tags().text(bl)]);bh=a.ofArray([d.add(e.Tags().NewTag("td",bi),a.ofArray([f.Attr().NewAttr("class","col-md-8")])),d.add(e.Tags().NewTag("td",bk),a.ofArray([f.Attr().NewAttr("class","col-md-4")]))]);return e.Tags().NewTag("tr",bh);};bm=a.map(bf,be);bo=a.ofArray([e.Tags().text(bd)]);bn=a.ofArray([d.add(e.Tags().NewTag("h5",bo),a.ofArray([f.Attr().NewAttr("class","accent-text")]))]);return a.ofArray([d.add(e.Tags().NewTag("div",bn),a.ofArray([f.Attr().NewAttr("class","panel-body")])),g.length(be)>0?d.add(e.Tags().NewTag("table",bm),a.ofArray([f.Attr().NewAttr("class","table")])):i.emptyTable("No upcoming arrivals")]);};bp=a.map(ba,_);bq=a.concat(bp);_9["HtmlProvider@33"].Clear(_9.get_Body());bt=a.ofArray([e.Tags().text("Commute")]);bs=a.ofArray([e.Tags().NewTag("h4",bt)]);br=a.append(a.singleton(d.add(e.Tags().NewTag("div",bs),a.ofArray([f.Attr().NewAttr("class","panel-heading")]))),bq);return _9.AppendI(d.add(e.Tags().NewTag("div",br),a.ofArray([f.Attr().NewAttr("class","panel panel-default")])));};};bu=function(){return k.Async("MorningDashboard:4",[]);};return i.refreshBlock("oneBusAwayBlock",5,$.New(l,{$:0}),bu,_8);},refreshBlock:function(bv,bw,bx,by,bz){var bA,bB,bI;bA=d.add(e.Tags().NewTag("div",bx),a.ofArray([f.Attr().NewAttr("id",bv)]));bB=function(bC){var bD;bD=m.Delay(function(){return m.Bind(by(null),function(bF){var bG,bH;if(bF.$==1){bH=bF.$0;(bz(bC))(bH);bG=m.Return(null);}else{bG=m.Return(null);}return bG;});});return m.Start(bD,{$:0});};bB(bA);bI=function(){var bK;bK=n(function(){return bB(bA);},bw*1000);return;};d.OnBeforeRender(bI,bA);return bA;},trafficMapBlock:function(){var bM,bP,bQ,bR,bS;bM=function(){return m.Delay(function(){return m.Return({$:1,$0:null});});};bR=a.ofArray([e.Tags().text("Traffic")]);bQ=a.ofArray([e.Tags().NewTag("h4",bR)]);bS=a.ofArray([f.Attr().NewAttr("id","trafficMap"),f.Attr().NewAttr("class","map")]);bP=a.ofArray([d.add(e.Tags().NewTag("div",bQ),a.ofArray([f.Attr().NewAttr("class","panel-heading")])),e.Tags().NewTag("div",bS)]);return i.refreshBlock("trafficMapBlock",10*60,a.ofArray([d.add(e.Tags().NewTag("div",bP),a.ofArray([f.Attr().NewAttr("class","panel panel-default")]))]),bM,function(){return function(){return o("trafficMap").ready(p.createMap.call(null,"trafficMap"));};});},twitterBlock:function(){var bV,ca;bV=function(bW){return function(bX){var bY,bZ,b4,b5,b6,b7,b8,b9,b_,b$;bY=bX.Tweets;bZ=function(b0){var b1,b2,b3;b3=b0.Username+": "+b0.Text;b2=a.ofArray([e.Tags().text(b3)]);b1=a.ofArray([e.Tags().NewTag("td",b2)]);return e.Tags().NewTag("tr",b1);};b4=a.map(bZ,bY);b8=bX.Title;b7=a.ofArray([e.Tags().text(b8)]);b6=a.ofArray([d.add(e.Tags().NewTag("h5",b7),a.ofArray([f.Attr().NewAttr("class","accent-text")]))]);b5=a.ofArray([d.add(e.Tags().NewTag("div",b6),a.ofArray([f.Attr().NewAttr("class","panel-body")])),g.length(b4)>0?d.add(e.Tags().NewTag("table",b4),a.ofArray([f.Attr().NewAttr("class","table table-condensed")])):i.emptyTable("No tweets available")]);bW["HtmlProvider@33"].Clear(bW.get_Body());b$=a.ofArray([e.Tags().text("Recent Tweets")]);b_=a.ofArray([e.Tags().NewTag("h4",b$)]);b9=a.append(a.singleton(d.add(e.Tags().NewTag("div",b_),a.ofArray([f.Attr().NewAttr("class","panel-heading")]))),b5);return bW.AppendI(d.add(e.Tags().NewTag("div",b9),a.ofArray([f.Attr().NewAttr("class","panel panel-default")])));};};ca=function(){return k.Async("MorningDashboard:0",[]);};return i.refreshBlock("twitterBlock",10,$.New(l,{$:0}),ca,bV);},wundergroundBlock:function(){var cc,cF;cc=function(cd){return function(ce){var cf,cg,cp,cq,cr,cs,ct,cu,cv,cw,cx,cy,cz,cA,cB,cC,cD,cE;cf=ce.Forecast;cg=function(ch){var ci,cj,ck,cl,cm,cn,co;ck=ch.Time;cj=a.ofArray([e.Tags().text(ck)]);cm=a.ofArray([f.Attr().NewAttr("class","wi "+ch.WeatherIcon+(ch.Accent?" accent-text-minor":""))]);cl=a.ofArray([e.Tags().NewTag("i",cm)]);co=ch.Temperature+"째";cn=a.ofArray([e.Tags().text(co)]);ci=a.ofArray([e.Tags().NewTag("td",cj),e.Tags().NewTag("td",cl),e.Tags().NewTag("td",cn)]);return e.Tags().NewTag("tr",ci);};cp=a.map(cg,cf);cu="weather wi "+ce.Current.WeatherIcon;ct=a.ofArray([f.Attr().NewAttr("class",cu)]);cs=a.ofArray([e.Tags().NewTag("i",ct)]);cr=a.ofArray([d.add(e.Tags().NewTag("h1",cs),a.ofArray([f.Attr().NewAttr("class","highlight "+(ce.Current.Accent?"accent-text-minor":"accent-text"))]))]);cx="Now: "+ce.Current.Temperature+"째";cw=a.ofArray([e.Tags().text(cx)]);cz="High: "+ce.Current.High+"째";cy=a.ofArray([e.Tags().text(cz)]);cB="Low: "+ce.Current.Low+"째";cA=a.ofArray([e.Tags().text(cB)]);cv=a.ofArray([d.add(e.Tags().NewTag("h4",cw),a.ofArray([f.Attr().NewAttr("class","accent-text")])),d.add(e.Tags().NewTag("h4",cy),a.ofArray([f.Attr().NewAttr("class","accent-text")])),d.add(e.Tags().NewTag("h4",cA),a.ofArray([f.Attr().NewAttr("class","accent-text")]))]);cq=a.ofArray([d.add(e.Tags().NewTag("div",cr),a.ofArray([f.Attr().NewAttr("class","col-md-5 text-center")])),d.add(e.Tags().NewTag("div",cv),a.ofArray([f.Attr().NewAttr("class","col-md-7")]))]);cd["HtmlProvider@33"].Clear(cd.get_Body());cE=a.ofArray([e.Tags().text("Weather")]);cD=a.ofArray([e.Tags().NewTag("h4",cE)]);cC=a.ofArray([d.add(e.Tags().NewTag("div",cD),a.ofArray([f.Attr().NewAttr("class","panel-heading")])),d.add(e.Tags().NewTag("div",cq),a.ofArray([f.Attr().NewAttr("class","panel-body")])),d.add(e.Tags().NewTag("table",cp),a.ofArray([f.Attr().NewAttr("class","table table-condensed")]))]);return cd.AppendI(d.add(e.Tags().NewTag("div",cC),a.ofArray([f.Attr().NewAttr("class","panel panel-default")])));};};cF=function(){return k.Async("MorningDashboard:3",[]);};return i.refreshBlock("wundergroundBlock",60*15,$.New(l,{$:0}),cF,cc);}}}});$.OnInit(function(){a=$.Safe($$.WebSharper.List);b=$.Safe($$.WebSharper.Html);c=$.Safe(b.Client);d=$.Safe(c.Operators);e=$.Safe(c.Tags);f=$.Safe(c.Attr);g=$.Safe($$.WebSharper.Seq);h=$.Safe($$.MorningDashboard);i=$.Safe(h.Client);j=$.Safe($$.WebSharper.Remoting);k=$.Safe(j.AjaxRemotingProvider);l=$.Safe(a.T);m=$.Safe($$.WebSharper.Concurrency);n=$.Safe($$.setInterval);o=$.Safe($$.jQuery);return p=$.Safe($$.window);});$.OnLoad(function(){return;});}());
