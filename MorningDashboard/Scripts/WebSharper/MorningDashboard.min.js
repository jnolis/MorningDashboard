(function(){var $$=this,$=this.IntelliFactory.Runtime,a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p;$.Define($$,{MorningDashboard:{Client:{calendarBlock:function(){var q,P;q=function(r){return function(s){var t,u,K,L,M,N,O;t=s.Calendars;u=function(v){var w,x,G,H,I,J;w=v.Instances;x=function(y){var z,A,B,C,D,E,F;B=y.Domain;A=a.ofArray([e.Tags().text(B)]);D=y.Event;C=a.ofArray([e.Tags().text(D)]);F=y.Time;E=a.ofArray([e.Tags().text(F)]);z=a.ofArray([d.add(e.Tags().NewTag("td",A),a.ofArray([f.Attr().NewAttr("class","col-md-3")])),d.add(e.Tags().NewTag("td",C),a.ofArray([f.Attr().NewAttr("class","col-md-5")])),d.add(e.Tags().NewTag("td",E),a.ofArray([f.Attr().NewAttr("class","col-md-4")]))]);return e.Tags().NewTag("tr",z);};G=a.map(x,w);J=v.Name;I=a.ofArray([e.Tags().text(J)]);H=a.ofArray([d.add(e.Tags().NewTag("h5",I),a.ofArray([f.Attr().NewAttr("class","text-primary")]))]);return a.ofArray([d.add(e.Tags().NewTag("div",H),a.ofArray([f.Attr().NewAttr("class","panel-body")])),g.length(v.Instances)>0?d.add(e.Tags().NewTag("table",G),a.ofArray([f.Attr().NewAttr("class","table table-condensed")])):i.emptyTable("No events today")]);};K=a.map(u,t);L=a.concat(K);r["HtmlProvider@33"].Clear(r.get_Body());O=a.ofArray([e.Tags().text("Daily events")]);N=a.ofArray([e.Tags().NewTag("h4",O)]);M=a.append(a.singleton(d.add(e.Tags().NewTag("div",N),a.ofArray([f.Attr().NewAttr("class","panel-heading")]))),L);return r.AppendI(d.add(e.Tags().NewTag("div",M),a.ofArray([f.Attr().NewAttr("class","panel panel-default")])));};};P=function(){return k.Async("MorningDashboard:1",[]);};return i.refreshBlock("calendarBlock",15*60,$.New(l,{$:0}),P,q);},currentTimeBlock:function(){var R,_2;R=function(S){return function(T){var U,V,W,X,Y,Z,_0,_1;S["HtmlProvider@33"].Clear(S.get_Body());X=T.Time;W=a.ofArray([e.Tags().text(X)]);Z=T.Weekday;Y=a.ofArray([e.Tags().text(Z)]);_1=T.Month+" "+T.Day;_0=a.ofArray([e.Tags().text(_1)]);V=a.ofArray([d.add(e.Tags().NewTag("h1",W),a.ofArray([f.Attr().NewAttr("class","text-primary highlight-small")])),d.add(e.Tags().NewTag("h4",Y),a.ofArray([f.Attr().NewAttr("class","text-primary")])),d.add(e.Tags().NewTag("h4",_0),a.ofArray([f.Attr().NewAttr("class","text-primary")]))]);U=a.ofArray([d.add(e.Tags().NewTag("div",V),a.ofArray([f.Attr().NewAttr("class","panel-body text-center")]))]);return S.AppendI(d.add(e.Tags().NewTag("div",U),a.ofArray([f.Attr().NewAttr("class","panel panel-default")])));};};_2=function(){return k.Async("MorningDashboard:2",[]);};return i.refreshBlock("currentTimeBlock",5,$.New(l,{$:0}),_2,R);},emptyTable:function(_4){var _5,_6,_7;_7=a.ofArray([e.Tags().text(_4)]);_6=a.ofArray([e.Tags().NewTag("td",_7)]);_5=a.ofArray([e.Tags().NewTag("tr",_6)]);return d.add(e.Tags().NewTag("table",_5),a.ofArray([f.Attr().NewAttr("class","table")]));},oneBusAwayBlock:function(){var _8,bw;_8=function(_9){return function(_){var ba,br,bs,bt,bu,bv;ba=function(bb){var bc,bd,be,bf,bo,bp,bq;bc=[bb.RouteTitle,bb.Arrivals];bd=bc[0];be=bc[1];bf=function(bg){var bh,bi,bj,bk,bl,bm,bn;bj=bg.Time;bi=a.ofArray([e.Tags().text(bj)]);bl=bg.Name;bk=a.ofArray([e.Tags().text(bl)]);bn=bg.TimeUntil;bm=a.ofArray([e.Tags().text(bn)]);bh=a.ofArray([d.add(e.Tags().NewTag("td",bi),a.ofArray([f.Attr().NewAttr("class","col-md-5")])),d.add(e.Tags().NewTag("td",bk),a.ofArray([f.Attr().NewAttr("class","col-md-3")])),d.add(e.Tags().NewTag("td",bm),a.ofArray([f.Attr().NewAttr("class","col-md-4"+(bg.Accent?" text-warning":""))]))]);return e.Tags().NewTag("tr",bh);};bo=a.map(bf,be);bq=a.ofArray([e.Tags().text(bd)]);bp=a.ofArray([d.add(e.Tags().NewTag("h5",bq),a.ofArray([f.Attr().NewAttr("class","text-primary")]))]);return a.ofArray([d.add(e.Tags().NewTag("div",bp),a.ofArray([f.Attr().NewAttr("class","panel-body")])),g.length(be)>0?d.add(e.Tags().NewTag("table",bo),a.ofArray([f.Attr().NewAttr("class","table table-condensed")])):i.emptyTable("No upcoming arrivals")]);};br=a.map(ba,_);bs=a.concat(br);_9["HtmlProvider@33"].Clear(_9.get_Body());bv=a.ofArray([e.Tags().text("Commute")]);bu=a.ofArray([e.Tags().NewTag("h4",bv)]);bt=a.append(a.singleton(d.add(e.Tags().NewTag("div",bu),a.ofArray([f.Attr().NewAttr("class","panel-heading")]))),bs);return _9.AppendI(d.add(e.Tags().NewTag("div",bt),a.ofArray([f.Attr().NewAttr("class","panel panel-default")])));};};bw=function(){return k.Async("MorningDashboard:4",[]);};return i.refreshBlock("oneBusAwayBlock",5,$.New(l,{$:0}),bw,_8);},refreshBlock:function(bx,by,bz,bA,bB){var bC,bD,bK;bC=d.add(e.Tags().NewTag("div",bz),a.ofArray([f.Attr().NewAttr("id",bx)]));bD=function(bE){var bF;bF=m.Delay(function(){return m.Bind(bA(null),function(bH){var bI,bJ;if(bH.$==1){bJ=bH.$0;(bB(bE))(bJ);bI=m.Return(null);}else{bI=m.Return(null);}return bI;});});return m.Start(bF,{$:0});};bD(bC);bK=function(){var bM;bM=n(function(){return bD(bC);},by*1000);return;};d.OnBeforeRender(bK,bC);return bC;},trafficMapBlock:function(){var bO,bR,bS,bT,bU;bO=function(){return m.Delay(function(){return m.Return({$:1,$0:null});});};bT=a.ofArray([e.Tags().text("Traffic")]);bS=a.ofArray([e.Tags().NewTag("h4",bT)]);bU=a.ofArray([f.Attr().NewAttr("id","trafficMap"),f.Attr().NewAttr("class","map")]);bR=a.ofArray([d.add(e.Tags().NewTag("div",bS),a.ofArray([f.Attr().NewAttr("class","panel-heading")])),e.Tags().NewTag("div",bU)]);return i.refreshBlock("trafficMapBlock",10*60,a.ofArray([d.add(e.Tags().NewTag("div",bR),a.ofArray([f.Attr().NewAttr("class","panel panel-default")]))]),bO,function(){return function(){return o("trafficMap").ready(p.createMap.call(null,"trafficMap"));};});},twitterBlock:function(){var bX,cc;bX=function(bY){return function(bZ){var b0,b1,b6,b7,b8,b9,b_,b$,ca,cb;b0=bZ.Tweets;b1=function(b2){var b3,b4,b5;b5=b2.Username+": "+b2.Text;b4=a.ofArray([e.Tags().text(b5)]);b3=a.ofArray([e.Tags().NewTag("td",b4)]);return e.Tags().NewTag("tr",b3);};b6=a.map(b1,b0);b_=bZ.Title;b9=a.ofArray([e.Tags().text(b_)]);b8=a.ofArray([d.add(e.Tags().NewTag("h5",b9),a.ofArray([f.Attr().NewAttr("class","text-primary")]))]);b7=a.ofArray([d.add(e.Tags().NewTag("div",b8),a.ofArray([f.Attr().NewAttr("class","panel-body")])),g.length(b6)>0?d.add(e.Tags().NewTag("table",b6),a.ofArray([f.Attr().NewAttr("class","table table-condensed")])):i.emptyTable("No tweets available")]);bY["HtmlProvider@33"].Clear(bY.get_Body());cb=a.ofArray([e.Tags().text("Recent Tweets")]);ca=a.ofArray([e.Tags().NewTag("h4",cb)]);b$=a.append(a.singleton(d.add(e.Tags().NewTag("div",ca),a.ofArray([f.Attr().NewAttr("class","panel-heading")]))),b7);return bY.AppendI(d.add(e.Tags().NewTag("div",b$),a.ofArray([f.Attr().NewAttr("class","panel panel-default")])));};};cc=function(){return k.Async("MorningDashboard:0",[]);};return i.refreshBlock("twitterBlock",10,$.New(l,{$:0}),cc,bX);},wundergroundBlock:function(){var ce,cH;ce=function(cf){return function(cg){var ch,ci,cr,cs,ct,cu,cv,cw,cx,cy,cz,cA,cB,cC,cD,cE,cF,cG;ch=cg.Forecast;ci=function(cj){var ck,cl,cm,cn,co,cp,cq;cm=cj.Time;cl=a.ofArray([e.Tags().text(cm)]);co=a.ofArray([f.Attr().NewAttr("class","wi "+cj.WeatherIcon+(cj.Accent?" text-warning":""))]);cn=a.ofArray([e.Tags().NewTag("i",co)]);cq=cj.Temperature+"째";cp=a.ofArray([e.Tags().text(cq)]);ck=a.ofArray([e.Tags().NewTag("td",cl),e.Tags().NewTag("td",cn),e.Tags().NewTag("td",cp)]);return e.Tags().NewTag("tr",ck);};cr=a.map(ci,ch);cw="weather wi "+cg.Current.WeatherIcon;cv=a.ofArray([f.Attr().NewAttr("class",cw)]);cu=a.ofArray([e.Tags().NewTag("i",cv)]);ct=a.ofArray([d.add(e.Tags().NewTag("h1",cu),a.ofArray([f.Attr().NewAttr("class","highlight "+(cg.Current.Accent?"text-warning":"text-primary"))]))]);cz="Now: "+cg.Current.Temperature+"째";cy=a.ofArray([e.Tags().text(cz)]);cB="High: "+cg.Current.High+"째";cA=a.ofArray([e.Tags().text(cB)]);cD="Low: "+cg.Current.Low+"째";cC=a.ofArray([e.Tags().text(cD)]);cx=a.ofArray([d.add(e.Tags().NewTag("h4",cy),a.ofArray([f.Attr().NewAttr("class","text-primary")])),d.add(e.Tags().NewTag("h4",cA),a.ofArray([f.Attr().NewAttr("class","text-primary")])),d.add(e.Tags().NewTag("h4",cC),a.ofArray([f.Attr().NewAttr("class","text-primary")]))]);cs=a.ofArray([d.add(e.Tags().NewTag("div",ct),a.ofArray([f.Attr().NewAttr("class","col-md-5 text-center")])),d.add(e.Tags().NewTag("div",cx),a.ofArray([f.Attr().NewAttr("class","col-md-7")]))]);cf["HtmlProvider@33"].Clear(cf.get_Body());cG=a.ofArray([e.Tags().text("Weather")]);cF=a.ofArray([e.Tags().NewTag("h4",cG)]);cE=a.ofArray([d.add(e.Tags().NewTag("div",cF),a.ofArray([f.Attr().NewAttr("class","panel-heading")])),d.add(e.Tags().NewTag("div",cs),a.ofArray([f.Attr().NewAttr("class","panel-body")])),d.add(e.Tags().NewTag("table",cr),a.ofArray([f.Attr().NewAttr("class","table table-condensed")]))]);return cf.AppendI(d.add(e.Tags().NewTag("div",cE),a.ofArray([f.Attr().NewAttr("class","panel panel-default")])));};};cH=function(){return k.Async("MorningDashboard:3",[]);};return i.refreshBlock("wundergroundBlock",60*15,$.New(l,{$:0}),cH,ce);}}}});$.OnInit(function(){a=$.Safe($$.WebSharper.List);b=$.Safe($$.WebSharper.Html);c=$.Safe(b.Client);d=$.Safe(c.Operators);e=$.Safe(c.Tags);f=$.Safe(c.Attr);g=$.Safe($$.WebSharper.Seq);h=$.Safe($$.MorningDashboard);i=$.Safe(h.Client);j=$.Safe($$.WebSharper.Remoting);k=$.Safe(j.AjaxRemotingProvider);l=$.Safe(a.T);m=$.Safe($$.WebSharper.Concurrency);n=$.Safe($$.setInterval);o=$.Safe($$.jQuery);return p=$.Safe($$.window);});$.OnLoad(function(){return;});}());
