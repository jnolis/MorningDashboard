(function(){var $$=this,$=this.IntelliFactory.Runtime,a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p;$.Define($$,{MorningDashboard:{Client:{calendarBlock:function(){var q,P;q=function(r){return function(s){var t,u,K,L,M,N,O;t=s.Calendars;u=function(v){var w,x,G,H,I,J;w=v.Instances;x=function(y){var z,A,B,C,D,E,F;B=y.Domain;A=a.ofArray([e.Tags().text(B)]);D=y.Event;C=a.ofArray([e.Tags().text(D)]);F=y.Time;E=a.ofArray([e.Tags().text(F)]);z=a.ofArray([d.add(e.Tags().NewTag("td",A),a.ofArray([f.Attr().NewAttr("class","col-md-3")])),d.add(e.Tags().NewTag("td",C),a.ofArray([f.Attr().NewAttr("class","col-md-5")])),d.add(e.Tags().NewTag("td",E),a.ofArray([f.Attr().NewAttr("class","col-md-4")]))]);return e.Tags().NewTag("tr",z);};G=a.map(x,w);J=v.Name;I=a.ofArray([e.Tags().text(J)]);H=a.ofArray([d.add(e.Tags().NewTag("h5",I),a.ofArray([f.Attr().NewAttr("class","text-primary")]))]);return a.ofArray([d.add(e.Tags().NewTag("div",H),a.ofArray([f.Attr().NewAttr("class","panel-body")])),g.length(v.Instances)>0?d.add(e.Tags().NewTag("table",G),a.ofArray([f.Attr().NewAttr("class","table table-condensed")])):i.emptyTable("No events")]);};K=a.map(u,t);L=a.concat(K);r["HtmlProvider@33"].Clear(r.get_Body());O=a.ofArray([e.Tags().text("Calendar")]);N=a.ofArray([e.Tags().NewTag("h4",O)]);M=a.append(a.singleton(d.add(e.Tags().NewTag("div",N),a.ofArray([f.Attr().NewAttr("class","panel-heading")]))),L);return r.AppendI(d.add(e.Tags().NewTag("div",M),a.ofArray([f.Attr().NewAttr("class","panel panel-default")])));};};P=function(){return k.Async("MorningDashboard:1",[]);};return i.refreshBlock("calendarBlock",15*60,$.New(l,{$:0}),P,q);},commuteBlock:function(){var R,bm;R=function(S){return function(T){var U,bi,bj,bk,bl;U=function(V){var W,be,bf,bg,bh;W=function(X){var Y,Z,_0,_1,_2,_3,_4,_5,_6,_7,_8,_9,_,ba,bb,bc,bd;Y=X.Method;if(Y.$==0){_1=Y.$0;_3=a.ofArray([f.Attr().NewAttr("class","fa fa-bus")]);_5=" "+_1;_4=a.ofArray([e.Tags().text(_5)]);_2=a.ofArray([e.Tags().NewTag("i",_3),e.Tags().NewTag("small",_4)]);_0=e.Tags().NewTag("td",_2);}else{_7=a.ofArray([f.Attr().NewAttr("class","fa fa-car")]);_6=a.ofArray([e.Tags().NewTag("i",_7)]);_0=e.Tags().NewTag("td",_6);}Z=_0;ba=X.Departure;_=a.ofArray([e.Tags().text(ba)]);_9=a.ofArray([e.Tags().NewTag("small",_)]);bd=X.Arrival;bc=a.ofArray([e.Tags().text(bd)]);bb=a.ofArray([e.Tags().NewTag("small",bc)]);_8=a.ofArray([d.add(Z,a.ofArray([f.Attr().NewAttr("class","col-md-2")])),d.add(e.Tags().NewTag("td",_9),a.ofArray([f.Attr().NewAttr("class","col-md-5"+(X.Accent?" text-warning":""))])),d.add(e.Tags().NewTag("td",bb),a.ofArray([f.Attr().NewAttr("class","col-md-5")]))]);return e.Tags().NewTag("tr",_8);};bg=V.RouteTitle;bf=a.ofArray([e.Tags().text(bg)]);be=a.ofArray([d.add(e.Tags().NewTag("h5",bf),a.ofArray([f.Attr().NewAttr("class","text-primary")]))]);bh=a.map(W,V.TravelResponses);return a.ofArray([d.add(e.Tags().NewTag("div",be),a.ofArray([f.Attr().NewAttr("class","panel-body")])),d.add(e.Tags().NewTag("table",bh),a.ofArray([f.Attr().NewAttr("class","table table-condensed")]))]);};S["HtmlProvider@33"].Clear(S.get_Body());bk=a.ofArray([e.Tags().text("Commute")]);bj=a.ofArray([e.Tags().NewTag("h4",bk)]);bl=a.map(U,T);bi=a.append(a.singleton(d.add(e.Tags().NewTag("div",bj),a.ofArray([f.Attr().NewAttr("class","panel-heading")]))),a.concat(bl));return S.AppendI(d.add(e.Tags().NewTag("div",bi),a.ofArray([f.Attr().NewAttr("class","panel panel-default")])));};};bm=function(){return k.Async("MorningDashboard:4",[]);};return i.refreshBlock("commuteBlock",5,$.New(l,{$:0}),bm,R);},currentTimeBlock:function(){var bn,by;bn=function(bo){return function(bp){var bq,br,bs,bt,bu,bv,bw,bx;bo["HtmlProvider@33"].Clear(bo.get_Body());bt=bp.Time;bs=a.ofArray([e.Tags().text(bt)]);bv=bp.Weekday;bu=a.ofArray([e.Tags().text(bv)]);bx=bp.Month+" "+bp.Day;bw=a.ofArray([e.Tags().text(bx)]);br=a.ofArray([d.add(e.Tags().NewTag("h1",bs),a.ofArray([f.Attr().NewAttr("class","text-primary highlight-small")])),d.add(e.Tags().NewTag("h4",bu),a.ofArray([f.Attr().NewAttr("class","text-primary")])),d.add(e.Tags().NewTag("h4",bw),a.ofArray([f.Attr().NewAttr("class","text-primary")]))]);bq=a.ofArray([d.add(e.Tags().NewTag("div",br),a.ofArray([f.Attr().NewAttr("class","panel-body text-center")]))]);return bo.AppendI(d.add(e.Tags().NewTag("div",bq),a.ofArray([f.Attr().NewAttr("class","panel panel-default")])));};};by=function(){return k.Async("MorningDashboard:2",[]);};return i.refreshBlock("currentTimeBlock",5,$.New(l,{$:0}),by,bn);},emptyTable:function(bA){var bB,bC,bD;bD=a.ofArray([e.Tags().text(bA)]);bC=a.ofArray([e.Tags().NewTag("td",bD)]);bB=a.ofArray([e.Tags().NewTag("tr",bC)]);return d.add(e.Tags().NewTag("table",bB),a.ofArray([f.Attr().NewAttr("class","table")]));},refreshBlock:function(bE,bF,bG,bH,bI){var bJ,bK,bR;bJ=d.add(e.Tags().NewTag("div",bG),a.ofArray([f.Attr().NewAttr("id",bE)]));bK=function(bL){var bM;bM=m.Delay(function(){return m.Bind(bH(null),function(bO){var bP,bQ;if(bO.$==1){bQ=bO.$0;(bI(bL))(bQ);bP=m.Return(null);}else{bP=m.Return(null);}return bP;});});return m.Start(bM,{$:0});};bK(bJ);bR=function(){var bT;bT=n(function(){return bK(bJ);},bF*1000);return;};d.OnBeforeRender(bR,bJ);return bJ;},trafficMapBlock:function(){var bV,bY,bZ,b0,b1;bV=function(){return m.Delay(function(){return m.Return({$:1,$0:null});});};b0=a.ofArray([e.Tags().text("Traffic")]);bZ=a.ofArray([e.Tags().NewTag("h4",b0)]);b1=a.ofArray([f.Attr().NewAttr("id","trafficMap"),f.Attr().NewAttr("class","map")]);bY=a.ofArray([d.add(e.Tags().NewTag("div",bZ),a.ofArray([f.Attr().NewAttr("class","panel-heading")])),e.Tags().NewTag("div",b1)]);return i.refreshBlock("trafficMapBlock",10*60,a.ofArray([d.add(e.Tags().NewTag("div",bY),a.ofArray([f.Attr().NewAttr("class","panel panel-default")]))]),bV,function(){return function(){return o("trafficMap").ready(p.createMap.call(null,"trafficMap"));};});},twitterBlock:function(){var b4,cj;b4=function(b5){return function(b6){var b7,b8,cb,cc,cd,ce,cf,cg,ch,ci;b7=b6.Tweets;b8=function(b9){var b_,b$,ca;ca=b9.Username+": "+b9.Text;b$=a.ofArray([e.Tags().text(ca)]);b_=a.ofArray([e.Tags().NewTag("td",b$)]);return e.Tags().NewTag("tr",b_);};cb=a.map(b8,b7);cf=b6.Title;ce=a.ofArray([e.Tags().text(cf)]);cd=a.ofArray([d.add(e.Tags().NewTag("h5",ce),a.ofArray([f.Attr().NewAttr("class","text-primary")]))]);cc=a.ofArray([d.add(e.Tags().NewTag("div",cd),a.ofArray([f.Attr().NewAttr("class","panel-body")])),g.length(cb)>0?d.add(e.Tags().NewTag("table",cb),a.ofArray([f.Attr().NewAttr("class","table table-condensed")])):i.emptyTable("No tweets available")]);b5["HtmlProvider@33"].Clear(b5.get_Body());ci=a.ofArray([e.Tags().text("Recent Tweets")]);ch=a.ofArray([e.Tags().NewTag("h4",ci)]);cg=a.append(a.singleton(d.add(e.Tags().NewTag("div",ch),a.ofArray([f.Attr().NewAttr("class","panel-heading")]))),cc);return b5.AppendI(d.add(e.Tags().NewTag("div",cg),a.ofArray([f.Attr().NewAttr("class","panel panel-default")])));};};cj=function(){return k.Async("MorningDashboard:0",[]);};return i.refreshBlock("twitterBlock",10,$.New(l,{$:0}),cj,b4);},wundergroundBlock:function(){var cl,cO;cl=function(cm){return function(cn){var co,cp,cy,cz,cA,cB,cC,cD,cE,cF,cG,cH,cI,cJ,cK,cL,cM,cN;co=cn.Forecast;cp=function(cq){var cr,cs,ct,cu,cv,cw,cx;ct=cq.Time;cs=a.ofArray([e.Tags().text(ct)]);cv=a.ofArray([f.Attr().NewAttr("class","wi "+cq.WeatherIcon+(cq.Accent?" text-warning":""))]);cu=a.ofArray([e.Tags().NewTag("i",cv)]);cx=cq.Temperature+"째";cw=a.ofArray([e.Tags().text(cx)]);cr=a.ofArray([e.Tags().NewTag("td",cs),e.Tags().NewTag("td",cu),e.Tags().NewTag("td",cw)]);return e.Tags().NewTag("tr",cr);};cy=a.map(cp,co);cD="weather wi "+cn.Current.WeatherIcon;cC=a.ofArray([f.Attr().NewAttr("class",cD)]);cB=a.ofArray([e.Tags().NewTag("i",cC)]);cA=a.ofArray([d.add(e.Tags().NewTag("h1",cB),a.ofArray([f.Attr().NewAttr("class","highlight "+(cn.Current.Accent?"text-warning":"text-primary"))]))]);cG="Now: "+cn.Current.Temperature+"째";cF=a.ofArray([e.Tags().text(cG)]);cI="High: "+cn.Current.High+"째";cH=a.ofArray([e.Tags().text(cI)]);cK="Low: "+cn.Current.Low+"째";cJ=a.ofArray([e.Tags().text(cK)]);cE=a.ofArray([d.add(e.Tags().NewTag("h4",cF),a.ofArray([f.Attr().NewAttr("class","text-primary")])),d.add(e.Tags().NewTag("h4",cH),a.ofArray([f.Attr().NewAttr("class","text-primary")])),d.add(e.Tags().NewTag("h4",cJ),a.ofArray([f.Attr().NewAttr("class","text-primary")]))]);cz=a.ofArray([d.add(e.Tags().NewTag("div",cA),a.ofArray([f.Attr().NewAttr("class","col-md-5 text-center")])),d.add(e.Tags().NewTag("div",cE),a.ofArray([f.Attr().NewAttr("class","col-md-7")]))]);cm["HtmlProvider@33"].Clear(cm.get_Body());cN=a.ofArray([e.Tags().text("Weather")]);cM=a.ofArray([e.Tags().NewTag("h4",cN)]);cL=a.ofArray([d.add(e.Tags().NewTag("div",cM),a.ofArray([f.Attr().NewAttr("class","panel-heading")])),d.add(e.Tags().NewTag("div",cz),a.ofArray([f.Attr().NewAttr("class","panel-body")])),d.add(e.Tags().NewTag("table",cy),a.ofArray([f.Attr().NewAttr("class","table table-condensed")]))]);return cm.AppendI(d.add(e.Tags().NewTag("div",cL),a.ofArray([f.Attr().NewAttr("class","panel panel-default")])));};};cO=function(){return k.Async("MorningDashboard:3",[]);};return i.refreshBlock("wundergroundBlock",60*15,$.New(l,{$:0}),cO,cl);}}}});$.OnInit(function(){a=$.Safe($$.WebSharper.List);b=$.Safe($$.WebSharper.Html);c=$.Safe(b.Client);d=$.Safe(c.Operators);e=$.Safe(c.Tags);f=$.Safe(c.Attr);g=$.Safe($$.WebSharper.Seq);h=$.Safe($$.MorningDashboard);i=$.Safe(h.Client);j=$.Safe($$.WebSharper.Remoting);k=$.Safe(j.AjaxRemotingProvider);l=$.Safe(a.T);m=$.Safe($$.WebSharper.Concurrency);n=$.Safe($$.setInterval);o=$.Safe($$.jQuery);return p=$.Safe($$.window);});$.OnLoad(function(){return;});}());
