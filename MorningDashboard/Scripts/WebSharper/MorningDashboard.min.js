(function(){var $$=this,$=this.IntelliFactory.Runtime,a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p;$.Define($$,{MorningDashboard:{Client:{calendarBlock:function(){var q,P;q=function(r){return function(s){var t,u,K,L,M,N,O;t=s.Calendars;u=function(v){var w,x,G,H,I,J;w=v.Instances;x=function(y){var z,A,B,C,D,E,F;B=y.Domain;A=a.ofArray([e.Tags().text(B)]);D=y.Event;C=a.ofArray([e.Tags().text(D)]);F=y.Time;E=a.ofArray([e.Tags().text(F)]);z=a.ofArray([d.add(e.Tags().NewTag("td",A),a.ofArray([f.Attr().NewAttr("class","col-md-3")])),d.add(e.Tags().NewTag("td",C),a.ofArray([f.Attr().NewAttr("class","col-md-5")])),d.add(e.Tags().NewTag("td",E),a.ofArray([f.Attr().NewAttr("class","col-md-4")]))]);return e.Tags().NewTag("tr",z);};G=a.map(x,w);J=v.Name;I=a.ofArray([e.Tags().text(J)]);H=a.ofArray([d.add(e.Tags().NewTag("h5",I),a.ofArray([f.Attr().NewAttr("class","text-primary")]))]);return a.ofArray([d.add(e.Tags().NewTag("div",H),a.ofArray([f.Attr().NewAttr("class","panel-body")])),g.length(v.Instances)>0?d.add(e.Tags().NewTag("table",G),a.ofArray([f.Attr().NewAttr("class","table table-condensed")])):i.emptyTable("No events today")]);};K=a.map(u,t);L=a.concat(K);r["HtmlProvider@33"].Clear(r.get_Body());O=a.ofArray([e.Tags().text("Calendar")]);N=a.ofArray([e.Tags().NewTag("h4",O)]);M=a.append(a.singleton(d.add(e.Tags().NewTag("div",N),a.ofArray([f.Attr().NewAttr("class","panel-heading")]))),L);return r.AppendI(d.add(e.Tags().NewTag("div",M),a.ofArray([f.Attr().NewAttr("class","panel panel-default")])));};};P=function(){return k.Async("MorningDashboard:1",[]);};return i.refreshBlock("calendarBlock",15*60,$.New(l,{$:0}),P,q);},commuteBlock:function(){var R,bj;R=function(S){return function(T){var U,bf,bg,bh,bi;U=function(V){var W,bb,bc,bd,be;W=function(X){var Y,Z,_0,_1,_2,_3,_4,_5,_6,_7,_8,_9,_,ba;if(X.$==1){Z=X.$0;_1=a.ofArray([e.Tags().text("Car")]);_2=a.ofArray([e.Tags().text("-")]);_4="10:00AM "+Z.TrafficTime;_3=a.ofArray([e.Tags().text(_4)]);_0=a.ofArray([d.add(e.Tags().NewTag("td",_1),a.ofArray([f.Attr().NewAttr("class","col-md-4")])),d.add(e.Tags().NewTag("td",_2),a.ofArray([f.Attr().NewAttr("class","col-md-4")])),d.add(e.Tags().NewTag("td",_3),a.ofArray([f.Attr().NewAttr("class","col-md-4")]))]);Y=e.Tags().NewTag("tr",_0);}else{_5=X.$0;_8="Bus "+_5.Name;_7=a.ofArray([e.Tags().text(_8)]);_=_5.Time+" "+_5.TimeUntil;_9=a.ofArray([e.Tags().text(_)]);ba=a.ofArray([e.Tags().text("-")]);_6=a.ofArray([d.add(e.Tags().NewTag("td",_7),a.ofArray([f.Attr().NewAttr("class","col-md-4")])),d.add(e.Tags().NewTag("td",_9),a.ofArray([f.Attr().NewAttr("class","col-md-4"+(_5.Accent?" text-warning":""))])),d.add(e.Tags().NewTag("td",ba),a.ofArray([f.Attr().NewAttr("class","col-md-4")]))]);Y=e.Tags().NewTag("tr",_6);}return Y;};bd=V.RouteTitle;bc=a.ofArray([e.Tags().text(bd)]);bb=a.ofArray([d.add(e.Tags().NewTag("h5",bc),a.ofArray([f.Attr().NewAttr("class","text-primary")]))]);be=a.map(W,V.TravelResponses);return a.ofArray([d.add(e.Tags().NewTag("div",bb),a.ofArray([f.Attr().NewAttr("class","panel-body")])),d.add(e.Tags().NewTag("table",be),a.ofArray([f.Attr().NewAttr("class","table table-condensed")]))]);};S["HtmlProvider@33"].Clear(S.get_Body());bh=a.ofArray([e.Tags().text("Commute")]);bg=a.ofArray([e.Tags().NewTag("h4",bh)]);bi=a.map(U,T);bf=a.append(a.singleton(d.add(e.Tags().NewTag("div",bg),a.ofArray([f.Attr().NewAttr("class","panel-heading")]))),a.concat(bi));return S.AppendI(d.add(e.Tags().NewTag("div",bf),a.ofArray([f.Attr().NewAttr("class","panel panel-default")])));};};bj=function(){return k.Async("MorningDashboard:4",[]);};return i.refreshBlock("commuteBlock",5,$.New(l,{$:0}),bj,R);},currentTimeBlock:function(){var bk,bv;bk=function(bl){return function(bm){var bn,bo,bp,bq,br,bs,bt,bu;bl["HtmlProvider@33"].Clear(bl.get_Body());bq=bm.Time;bp=a.ofArray([e.Tags().text(bq)]);bs=bm.Weekday;br=a.ofArray([e.Tags().text(bs)]);bu=bm.Month+" "+bm.Day;bt=a.ofArray([e.Tags().text(bu)]);bo=a.ofArray([d.add(e.Tags().NewTag("h1",bp),a.ofArray([f.Attr().NewAttr("class","text-primary highlight-small")])),d.add(e.Tags().NewTag("h4",br),a.ofArray([f.Attr().NewAttr("class","text-primary")])),d.add(e.Tags().NewTag("h4",bt),a.ofArray([f.Attr().NewAttr("class","text-primary")]))]);bn=a.ofArray([d.add(e.Tags().NewTag("div",bo),a.ofArray([f.Attr().NewAttr("class","panel-body text-center")]))]);return bl.AppendI(d.add(e.Tags().NewTag("div",bn),a.ofArray([f.Attr().NewAttr("class","panel panel-default")])));};};bv=function(){return k.Async("MorningDashboard:2",[]);};return i.refreshBlock("currentTimeBlock",5,$.New(l,{$:0}),bv,bk);},emptyTable:function(bx){var by,bz,bA;bA=a.ofArray([e.Tags().text(bx)]);bz=a.ofArray([e.Tags().NewTag("td",bA)]);by=a.ofArray([e.Tags().NewTag("tr",bz)]);return d.add(e.Tags().NewTag("table",by),a.ofArray([f.Attr().NewAttr("class","table")]));},refreshBlock:function(bB,bC,bD,bE,bF){var bG,bH,bO;bG=d.add(e.Tags().NewTag("div",bD),a.ofArray([f.Attr().NewAttr("id",bB)]));bH=function(bI){var bJ;bJ=m.Delay(function(){return m.Bind(bE(null),function(bL){var bM,bN;if(bL.$==1){bN=bL.$0;(bF(bI))(bN);bM=m.Return(null);}else{bM=m.Return(null);}return bM;});});return m.Start(bJ,{$:0});};bH(bG);bO=function(){var bQ;bQ=n(function(){return bH(bG);},bC*1000);return;};d.OnBeforeRender(bO,bG);return bG;},trafficMapBlock:function(){var bS,bV,bW,bX,bY;bS=function(){return m.Delay(function(){return m.Return({$:1,$0:null});});};bX=a.ofArray([e.Tags().text("Traffic")]);bW=a.ofArray([e.Tags().NewTag("h4",bX)]);bY=a.ofArray([f.Attr().NewAttr("id","trafficMap"),f.Attr().NewAttr("class","map")]);bV=a.ofArray([d.add(e.Tags().NewTag("div",bW),a.ofArray([f.Attr().NewAttr("class","panel-heading")])),e.Tags().NewTag("div",bY)]);return i.refreshBlock("trafficMapBlock",10*60,a.ofArray([d.add(e.Tags().NewTag("div",bV),a.ofArray([f.Attr().NewAttr("class","panel panel-default")]))]),bS,function(){return function(){return o("trafficMap").ready(p.createMap.call(null,"trafficMap"));};});},twitterBlock:function(){var b1,cg;b1=function(b2){return function(b3){var b4,b5,b_,b$,ca,cb,cc,cd,ce,cf;b4=b3.Tweets;b5=function(b6){var b7,b8,b9;b9=b6.Username+": "+b6.Text;b8=a.ofArray([e.Tags().text(b9)]);b7=a.ofArray([e.Tags().NewTag("td",b8)]);return e.Tags().NewTag("tr",b7);};b_=a.map(b5,b4);cc=b3.Title;cb=a.ofArray([e.Tags().text(cc)]);ca=a.ofArray([d.add(e.Tags().NewTag("h5",cb),a.ofArray([f.Attr().NewAttr("class","text-primary")]))]);b$=a.ofArray([d.add(e.Tags().NewTag("div",ca),a.ofArray([f.Attr().NewAttr("class","panel-body")])),g.length(b_)>0?d.add(e.Tags().NewTag("table",b_),a.ofArray([f.Attr().NewAttr("class","table table-condensed")])):i.emptyTable("No tweets available")]);b2["HtmlProvider@33"].Clear(b2.get_Body());cf=a.ofArray([e.Tags().text("Recent Tweets")]);ce=a.ofArray([e.Tags().NewTag("h4",cf)]);cd=a.append(a.singleton(d.add(e.Tags().NewTag("div",ce),a.ofArray([f.Attr().NewAttr("class","panel-heading")]))),b$);return b2.AppendI(d.add(e.Tags().NewTag("div",cd),a.ofArray([f.Attr().NewAttr("class","panel panel-default")])));};};cg=function(){return k.Async("MorningDashboard:0",[]);};return i.refreshBlock("twitterBlock",10,$.New(l,{$:0}),cg,b1);},wundergroundBlock:function(){var ci,cL;ci=function(cj){return function(ck){var cl,cm,cv,cw,cx,cy,cz,cA,cB,cC,cD,cE,cF,cG,cH,cI,cJ,cK;cl=ck.Forecast;cm=function(cn){var co,cp,cq,cr,cs,ct,cu;cq=cn.Time;cp=a.ofArray([e.Tags().text(cq)]);cs=a.ofArray([f.Attr().NewAttr("class","wi "+cn.WeatherIcon+(cn.Accent?" text-warning":""))]);cr=a.ofArray([e.Tags().NewTag("i",cs)]);cu=cn.Temperature+"째";ct=a.ofArray([e.Tags().text(cu)]);co=a.ofArray([e.Tags().NewTag("td",cp),e.Tags().NewTag("td",cr),e.Tags().NewTag("td",ct)]);return e.Tags().NewTag("tr",co);};cv=a.map(cm,cl);cA="weather wi "+ck.Current.WeatherIcon;cz=a.ofArray([f.Attr().NewAttr("class",cA)]);cy=a.ofArray([e.Tags().NewTag("i",cz)]);cx=a.ofArray([d.add(e.Tags().NewTag("h1",cy),a.ofArray([f.Attr().NewAttr("class","highlight "+(ck.Current.Accent?"text-warning":"text-primary"))]))]);cD="Now: "+ck.Current.Temperature+"째";cC=a.ofArray([e.Tags().text(cD)]);cF="High: "+ck.Current.High+"째";cE=a.ofArray([e.Tags().text(cF)]);cH="Low: "+ck.Current.Low+"째";cG=a.ofArray([e.Tags().text(cH)]);cB=a.ofArray([d.add(e.Tags().NewTag("h4",cC),a.ofArray([f.Attr().NewAttr("class","text-primary")])),d.add(e.Tags().NewTag("h4",cE),a.ofArray([f.Attr().NewAttr("class","text-primary")])),d.add(e.Tags().NewTag("h4",cG),a.ofArray([f.Attr().NewAttr("class","text-primary")]))]);cw=a.ofArray([d.add(e.Tags().NewTag("div",cx),a.ofArray([f.Attr().NewAttr("class","col-md-5 text-center")])),d.add(e.Tags().NewTag("div",cB),a.ofArray([f.Attr().NewAttr("class","col-md-7")]))]);cj["HtmlProvider@33"].Clear(cj.get_Body());cK=a.ofArray([e.Tags().text("Weather")]);cJ=a.ofArray([e.Tags().NewTag("h4",cK)]);cI=a.ofArray([d.add(e.Tags().NewTag("div",cJ),a.ofArray([f.Attr().NewAttr("class","panel-heading")])),d.add(e.Tags().NewTag("div",cw),a.ofArray([f.Attr().NewAttr("class","panel-body")])),d.add(e.Tags().NewTag("table",cv),a.ofArray([f.Attr().NewAttr("class","table table-condensed")]))]);return cj.AppendI(d.add(e.Tags().NewTag("div",cI),a.ofArray([f.Attr().NewAttr("class","panel panel-default")])));};};cL=function(){return k.Async("MorningDashboard:3",[]);};return i.refreshBlock("wundergroundBlock",60*15,$.New(l,{$:0}),cL,ci);}}}});$.OnInit(function(){a=$.Safe($$.WebSharper.List);b=$.Safe($$.WebSharper.Html);c=$.Safe(b.Client);d=$.Safe(c.Operators);e=$.Safe(c.Tags);f=$.Safe(c.Attr);g=$.Safe($$.WebSharper.Seq);h=$.Safe($$.MorningDashboard);i=$.Safe(h.Client);j=$.Safe($$.WebSharper.Remoting);k=$.Safe(j.AjaxRemotingProvider);l=$.Safe(a.T);m=$.Safe($$.WebSharper.Concurrency);n=$.Safe($$.setInterval);o=$.Safe($$.jQuery);return p=$.Safe($$.window);});$.OnLoad(function(){return;});}());
