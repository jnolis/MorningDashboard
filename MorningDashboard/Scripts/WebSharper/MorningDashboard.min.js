(function(){var $$=this,$=this.IntelliFactory.Runtime,a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p;$.Define($$,{MorningDashboard:{Client:{calendarBlock:function(){var q,O;q=function(r){return function(s){var t,u,I,J,K,L,M,N;t=s.Calendars;u=function(v){var w,x,E,F,G,H;w=v.Instances;x=function(y){var z,A,B,C,D;B=y.Event;A=a.ofArray([d.Tags().text(B)]);D=y.Time;C=a.ofArray([d.Tags().text(D)]);z=a.ofArray([d.Tags().NewTag("td",A),d.Tags().NewTag("td",C)]);return d.Tags().NewTag("tr",z);};E=a.map(x,w);H=v.Name;G=a.ofArray([d.Tags().text(H)]);F=a.ofArray([d.Tags().NewTag("h5",G)]);return a.ofArray([e.add(d.Tags().NewTag("div",F),a.ofArray([f.Attr().NewAttr("class","panel-body")])),g.length(v.Instances)>0?e.add(d.Tags().NewTag("table",E),a.ofArray([f.Attr().NewAttr("class","table")])):i.emptyTable("No events today")]);};I=a.map(u,t);J=a.concat(I);r["HtmlProvider@33"].Clear(r.get_Body());N=a.ofArray([d.Tags().text("Daily events")]);M=a.ofArray([d.Tags().NewTag("h4",N)]);L=a.append(a.singleton(e.add(d.Tags().NewTag("div",M),a.ofArray([f.Attr().NewAttr("class","panel-heading")]))),J);K=a.ofArray([e.add(d.Tags().NewTag("div",L),a.ofArray([f.Attr().NewAttr("class","panel panel-default")]))]);return r.AppendI(e.add(d.Tags().NewTag("div",K),a.ofArray([f.Attr().NewAttr("class","col-md-5")])));};};O=function(){return k.Async("MorningDashboard:1",[]);};return i.refreshBlock("calendarBlock",15*60,$.New(l,{$:0}),O,q);},currentTimeBlock:function(){var Q,_6;Q=function(R){return function(S){var T,U,V,W,X,Y,Z,_0,_1,_2,_3,_4,_5;R["HtmlProvider@33"].Clear(R.get_Body());W=a.ofArray([d.Tags().text("Time and date")]);V=a.ofArray([d.Tags().NewTag("h4",W)]);_0=S.Time;Z=a.ofArray([d.Tags().text(_0)]);Y=a.ofArray([e.add(d.Tags().NewTag("h1",Z),a.ofArray([f.Attr().NewAttr("class","highlight")]))]);_3=S.Weekday;_2=a.ofArray([d.Tags().text(_3)]);_5=S.Month+" "+S.Day;_4=a.ofArray([d.Tags().text(_5)]);_1=a.ofArray([d.Tags().NewTag("h4",_2),d.Tags().NewTag("h4",_4)]);X=a.ofArray([e.add(d.Tags().NewTag("div",Y),a.ofArray([f.Attr().NewAttr("class","col-md-6")])),e.add(d.Tags().NewTag("div",_1),a.ofArray([f.Attr().NewAttr("class","col-md-6")]))]);U=a.ofArray([e.add(d.Tags().NewTag("div",V),a.ofArray([f.Attr().NewAttr("class","panel-heading")])),e.add(d.Tags().NewTag("div",X),a.ofArray([f.Attr().NewAttr("class","panel-body")]))]);T=a.ofArray([e.add(d.Tags().NewTag("div",U),a.ofArray([f.Attr().NewAttr("class","panel panel-default")]))]);return R.AppendI(e.add(d.Tags().NewTag("div",T),a.ofArray([f.Attr().NewAttr("class","col-md-5")])));};};_6=function(){return k.Async("MorningDashboard:2",[]);};return i.refreshBlock("currentTimeBlock",5,$.New(l,{$:0}),_6,Q);},emptyTable:function(_8){var _9,_,ba;ba=a.ofArray([d.Tags().text(_8)]);_=a.ofArray([d.Tags().NewTag("td",ba)]);_9=a.ofArray([d.Tags().NewTag("tr",_)]);return e.add(d.Tags().NewTag("table",_9),a.ofArray([f.Attr().NewAttr("class","table")]));},oneBusAwayBlock:function(){var ba,by;ba=function(bb){return function(bc){var bd,bs,bt,bu,bv,bw,bx;bd=function(be){var bf,bg,bh,bi,bp,bq,br;bf=[be.RouteTitle,be.Arrivals];bg=bf[0];bh=bf[1];bi=function(bj){var bk,bl,bm,bn,bo;bm=bj.Time;bl=a.ofArray([d.Tags().text(bm)]);bo=bj.TimeUntil;bn=a.ofArray([d.Tags().text(bo)]);bk=a.ofArray([d.Tags().NewTag("td",bl),d.Tags().NewTag("td",bn)]);return d.Tags().NewTag("tr",bk);};bp=a.map(bi,bh);br=a.ofArray([d.Tags().text(bg)]);bq=a.ofArray([d.Tags().NewTag("h5",br)]);return a.ofArray([e.add(d.Tags().NewTag("div",bq),a.ofArray([f.Attr().NewAttr("class","panel-body")])),g.length(bh)>0?e.add(d.Tags().NewTag("table",bp),a.ofArray([f.Attr().NewAttr("class","table")])):i.emptyTable("No upcoming arrivals")]);};bs=a.map(bd,bc);bt=a.concat(bs);bb["HtmlProvider@33"].Clear(bb.get_Body());bx=a.ofArray([d.Tags().text("Commute")]);bw=a.ofArray([d.Tags().NewTag("h4",bx)]);bv=a.append(a.singleton(e.add(d.Tags().NewTag("div",bw),a.ofArray([f.Attr().NewAttr("class","panel-heading")]))),bt);bu=a.ofArray([e.add(d.Tags().NewTag("div",bv),a.ofArray([f.Attr().NewAttr("class","panel panel-default")]))]);return bb.AppendI(e.add(d.Tags().NewTag("div",bu),a.ofArray([f.Attr().NewAttr("class","col-md-3")])));};};by=function(){return k.Async("MorningDashboard:4",[]);};return i.refreshBlock("oneBusAwayBlock",5,$.New(l,{$:0}),by,ba);},refreshBlock:function(bA,bB,bC,bD,bE){var bF,bG,bN;bF=e.add(d.Tags().NewTag("div",bC),a.ofArray([f.Attr().NewAttr("id",bA)]));bG=function(bH){var bI;bI=m.Delay(function(){return m.Bind(bD(null),function(bK){var bL,bM;if(bK.$==1){bM=bK.$0;(bE(bH))(bM);bL=m.Return(null);}else{bL=m.Return(null);}return bL;});});return m.Start(bI,{$:0});};bG(bF);bN=function(){var bP;bP=n(function(){return bG(bF);},bB*1000);return;};e.OnBeforeRender(bN,bF);return bF;},trafficMapBlock:function(){var bR,bU,bV,bW,bX,bY;bR=function(){return m.Delay(function(){return m.Return({$:1,$0:null});});};bX=a.ofArray([d.Tags().text("Traffic")]);bW=a.ofArray([d.Tags().NewTag("h4",bX)]);bY=a.ofArray([f.Attr().NewAttr("id","trafficMap"),f.Attr().NewAttr("class","map")]);bV=a.ofArray([e.add(d.Tags().NewTag("div",bW),a.ofArray([f.Attr().NewAttr("class","panel-heading")])),d.Tags().NewTag("div",bY)]);bU=a.ofArray([e.add(d.Tags().NewTag("div",bV),a.ofArray([f.Attr().NewAttr("class","panel panel-default")]))]);return i.refreshBlock("trafficMapBlock",10*60,a.ofArray([e.add(d.Tags().NewTag("div",bU),a.ofArray([f.Attr().NewAttr("class","col-md-5")]))]),bR,function(){return function(){return o("trafficMap").ready(p.createMap.call(null,"trafficMap"));};});},twitterBlock:function(){var b1,ch;b1=function(b2){return function(b3){var b4,b5,b_,b$,ca,cb,cc,cd,ce,cf,cg;b4=b3.Tweets;b5=function(b6){var b7,b8,b9;b9=b6.Username+": "+b6.Text;b8=a.ofArray([d.Tags().text(b9)]);b7=a.ofArray([d.Tags().NewTag("td",b8)]);return d.Tags().NewTag("tr",b7);};b_=a.map(b5,b4);cc=b3.Title;cb=a.ofArray([d.Tags().text(cc)]);ca=a.ofArray([d.Tags().NewTag("h5",cb)]);b$=a.ofArray([e.add(d.Tags().NewTag("div",ca),a.ofArray([f.Attr().NewAttr("class","panel-body")])),g.length(b_)>0?e.add(d.Tags().NewTag("table",b_),a.ofArray([f.Attr().NewAttr("class","table table-condensed")])):i.emptyTable("No tweets available")]);b2["HtmlProvider@33"].Clear(b2.get_Body());cg=a.ofArray([d.Tags().text("Recent Tweets")]);cf=a.ofArray([d.Tags().NewTag("h4",cg)]);ce=a.append(a.singleton(e.add(d.Tags().NewTag("div",cf),a.ofArray([f.Attr().NewAttr("class","panel-heading")]))),b$);cd=a.ofArray([e.add(d.Tags().NewTag("div",ce),a.ofArray([f.Attr().NewAttr("class","panel panel-default")]))]);return b2.AppendI(e.add(d.Tags().NewTag("div",cd),a.ofArray([f.Attr().NewAttr("class","col-md-5")])));};};ch=function(){return k.Async("MorningDashboard:0",[]);};return i.refreshBlock("twitterBlock",10,$.New(l,{$:0}),ch,b1);},wundergroundBlock:function(){var cj,cO;cj=function(ck){return function(cl){var cm,cn,cx,cy,cz,cA,cB,cC,cD,cE,cF,cG,cH,cI,cJ,cK,cL,cM,cN;cm=cl.Forecast;cn=function(co){var cp,cq,cr,cs,ct,cu,cv,cw;cr=co.Time;cq=a.ofArray([d.Tags().text(cr)]);cu="wi "+co.WeatherIcon;ct=a.ofArray([f.Attr().NewAttr("class",cu)]);cs=a.ofArray([d.Tags().NewTag("i",ct)]);cw=co.Temperature+"째";cv=a.ofArray([d.Tags().text(cw)]);cp=a.ofArray([d.Tags().NewTag("td",cq),d.Tags().NewTag("td",cs),d.Tags().NewTag("td",cv)]);return d.Tags().NewTag("tr",cp);};cx=a.map(cn,cm);cC="weather wi "+cl.Current.WeatherIcon;cB=a.ofArray([f.Attr().NewAttr("class",cC)]);cA=a.ofArray([d.Tags().NewTag("i",cB)]);cz=a.ofArray([e.add(d.Tags().NewTag("h1",cA),a.ofArray([f.Attr().NewAttr("class","highlight")]))]);cF="Current: "+cl.Current.Temperature+"째";cE=a.ofArray([d.Tags().text(cF)]);cH="High: "+cl.Current.High+"째";cG=a.ofArray([d.Tags().text(cH)]);cJ="Low: "+cl.Current.Low+"째";cI=a.ofArray([d.Tags().text(cJ)]);cD=a.ofArray([d.Tags().NewTag("h4",cE),d.Tags().NewTag("h4",cG),d.Tags().NewTag("h4",cI)]);cy=a.ofArray([e.add(d.Tags().NewTag("div",cz),a.ofArray([f.Attr().NewAttr("class","col-md-6")])),e.add(d.Tags().NewTag("div",cD),a.ofArray([f.Attr().NewAttr("class","col-md-6")]))]);ck["HtmlProvider@33"].Clear(ck.get_Body());cN=a.ofArray([d.Tags().text("Weather")]);cM=a.ofArray([d.Tags().NewTag("h4",cN)]);cL=a.ofArray([e.add(d.Tags().NewTag("div",cM),a.ofArray([f.Attr().NewAttr("class","panel-heading")])),e.add(d.Tags().NewTag("div",cy),a.ofArray([f.Attr().NewAttr("class","panel-body")])),e.add(d.Tags().NewTag("table",cx),a.ofArray([f.Attr().NewAttr("class","table table-condensed")]))]);cK=a.ofArray([e.add(d.Tags().NewTag("div",cL),a.ofArray([f.Attr().NewAttr("class","panel panel-default")]))]);return ck.AppendI(e.add(d.Tags().NewTag("div",cK),a.ofArray([f.Attr().NewAttr("class","col-md-4")])));};};cO=function(){return k.Async("MorningDashboard:3",[]);};return i.refreshBlock("wundergroundBlock",60*15,$.New(l,{$:0}),cO,cj);}}}});$.OnInit(function(){a=$.Safe($$.WebSharper.List);b=$.Safe($$.WebSharper.Html);c=$.Safe(b.Client);d=$.Safe(c.Tags);e=$.Safe(c.Operators);f=$.Safe(c.Attr);g=$.Safe($$.WebSharper.Seq);h=$.Safe($$.MorningDashboard);i=$.Safe(h.Client);j=$.Safe($$.WebSharper.Remoting);k=$.Safe(j.AjaxRemotingProvider);l=$.Safe(a.T);m=$.Safe($$.WebSharper.Concurrency);n=$.Safe($$.setInterval);o=$.Safe($$.jQuery);return p=$.Safe($$.window);});$.OnLoad(function(){return;});}());
