(function(){var $$=this,$=this.IntelliFactory.Runtime,a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p;$.Define($$,{MorningDashboard:{Client:{calendarBlock:function(){var q,N;q=function(r){return function(s){var t,u,I,J,K,L,M;t=s.Calendars;u=function(v){var w,x,E,F,G,H;w=v.Instances;x=function(y){var z,A,B,C,D;B=y.Event;A=a.ofArray([e.Tags().text(B)]);D=y.Time;C=a.ofArray([e.Tags().text(D)]);z=a.ofArray([d.add(e.Tags().NewTag("td",A),a.ofArray([f.Attr().NewAttr("class","col-md-8")])),d.add(e.Tags().NewTag("td",C),a.ofArray([f.Attr().NewAttr("class","col-md-4")]))]);return e.Tags().NewTag("tr",z);};E=a.map(x,w);H=v.Name;G=a.ofArray([e.Tags().text(H)]);F=a.ofArray([d.add(e.Tags().NewTag("h5",G),a.ofArray([f.Attr().NewAttr("class","accent-text")]))]);return a.ofArray([d.add(e.Tags().NewTag("div",F),a.ofArray([f.Attr().NewAttr("class","panel-body")])),g.length(v.Instances)>0?d.add(e.Tags().NewTag("table",E),a.ofArray([f.Attr().NewAttr("class","table")])):i.emptyTable("No events today")]);};I=a.map(u,t);J=a.concat(I);r["HtmlProvider@33"].Clear(r.get_Body());M=a.ofArray([e.Tags().text("Daily events")]);L=a.ofArray([e.Tags().NewTag("h4",M)]);K=a.append(a.singleton(d.add(e.Tags().NewTag("div",L),a.ofArray([f.Attr().NewAttr("class","panel-heading")]))),J);return r.AppendI(d.add(e.Tags().NewTag("div",K),a.ofArray([f.Attr().NewAttr("class","panel panel-default")])));};};N=function(){return k.Async("MorningDashboard:1",[]);};return i.refreshBlock("calendarBlock",15*60,$.New(l,{$:0}),N,q);},currentTimeBlock:function(){var P,_0;P=function(Q){return function(R){var S,T,U,V,W,X,Y,Z;Q["HtmlProvider@33"].Clear(Q.get_Body());V=R.Time;U=a.ofArray([e.Tags().text(V)]);X=R.Weekday;W=a.ofArray([e.Tags().text(X)]);Z=R.Month+" "+R.Day;Y=a.ofArray([e.Tags().text(Z)]);T=a.ofArray([d.add(e.Tags().NewTag("h1",U),a.ofArray([f.Attr().NewAttr("class","accent-text highlight-small")])),d.add(e.Tags().NewTag("h4",W),a.ofArray([f.Attr().NewAttr("class","accent-text")])),d.add(e.Tags().NewTag("h4",Y),a.ofArray([f.Attr().NewAttr("class","accent-text")]))]);S=a.ofArray([d.add(e.Tags().NewTag("div",T),a.ofArray([f.Attr().NewAttr("class","panel-body text-center")]))]);return Q.AppendI(d.add(e.Tags().NewTag("div",S),a.ofArray([f.Attr().NewAttr("class","panel panel-default")])));};};_0=function(){return k.Async("MorningDashboard:2",[]);};return i.refreshBlock("currentTimeBlock",5,$.New(l,{$:0}),_0,P);},emptyTable:function(_2){var _3,_4,_5;_5=a.ofArray([e.Tags().text(_2)]);_4=a.ofArray([e.Tags().NewTag("td",_5)]);_3=a.ofArray([e.Tags().NewTag("tr",_4)]);return d.add(e.Tags().NewTag("table",_3),a.ofArray([f.Attr().NewAttr("class","table")]));},oneBusAwayBlock:function(){var _6,bs;_6=function(_7){return function(_8){var _9,bn,bo,bp,bq,br;_9=function(_){var ba,bb,bc,bd,bk,bl,bm;ba=[_.RouteTitle,_.Arrivals];bb=ba[0];bc=ba[1];bd=function(be){var bf,bg,bh,bi,bj;bh=be.Time;bg=a.ofArray([e.Tags().text(bh)]);bj=be.TimeUntil;bi=a.ofArray([e.Tags().text(bj)]);bf=a.ofArray([d.add(e.Tags().NewTag("td",bg),a.ofArray([f.Attr().NewAttr("class","col-md-8")])),d.add(e.Tags().NewTag("td",bi),a.ofArray([f.Attr().NewAttr("class","col-md-4")]))]);return e.Tags().NewTag("tr",bf);};bk=a.map(bd,bc);bm=a.ofArray([e.Tags().text(bb)]);bl=a.ofArray([d.add(e.Tags().NewTag("h5",bm),a.ofArray([f.Attr().NewAttr("class","accent-text")]))]);return a.ofArray([d.add(e.Tags().NewTag("div",bl),a.ofArray([f.Attr().NewAttr("class","panel-body")])),g.length(bc)>0?d.add(e.Tags().NewTag("table",bk),a.ofArray([f.Attr().NewAttr("class","table")])):i.emptyTable("No upcoming arrivals")]);};bn=a.map(_9,_8);bo=a.concat(bn);_7["HtmlProvider@33"].Clear(_7.get_Body());br=a.ofArray([e.Tags().text("Commute")]);bq=a.ofArray([e.Tags().NewTag("h4",br)]);bp=a.append(a.singleton(d.add(e.Tags().NewTag("div",bq),a.ofArray([f.Attr().NewAttr("class","panel-heading")]))),bo);return _7.AppendI(d.add(e.Tags().NewTag("div",bp),a.ofArray([f.Attr().NewAttr("class","panel panel-default")])));};};bs=function(){return k.Async("MorningDashboard:4",[]);};return i.refreshBlock("oneBusAwayBlock",5,$.New(l,{$:0}),bs,_6);},refreshBlock:function(bt,bu,bv,bw,bx){var by,bz,bG;by=d.add(e.Tags().NewTag("div",bv),a.ofArray([f.Attr().NewAttr("id",bt)]));bz=function(bA){var bB;bB=m.Delay(function(){return m.Bind(bw(null),function(bD){var bE,bF;if(bD.$==1){bF=bD.$0;(bx(bA))(bF);bE=m.Return(null);}else{bE=m.Return(null);}return bE;});});return m.Start(bB,{$:0});};bz(by);bG=function(){var bI;bI=n(function(){return bz(by);},bu*1000);return;};d.OnBeforeRender(bG,by);return by;},trafficMapBlock:function(){var bK,bN,bO,bP,bQ;bK=function(){return m.Delay(function(){return m.Return({$:1,$0:null});});};bP=a.ofArray([e.Tags().text("Traffic")]);bO=a.ofArray([e.Tags().NewTag("h4",bP)]);bQ=a.ofArray([f.Attr().NewAttr("id","trafficMap"),f.Attr().NewAttr("class","map")]);bN=a.ofArray([d.add(e.Tags().NewTag("div",bO),a.ofArray([f.Attr().NewAttr("class","panel-heading")])),e.Tags().NewTag("div",bQ)]);return i.refreshBlock("trafficMapBlock",10*60,a.ofArray([d.add(e.Tags().NewTag("div",bN),a.ofArray([f.Attr().NewAttr("class","panel panel-default")]))]),bK,function(){return function(){return o("trafficMap").ready(p.createMap.call(null,"trafficMap"));};});},twitterBlock:function(){var bT,b_;bT=function(bU){return function(bV){var bW,bX,b2,b3,b4,b5,b6,b7,b8,b9;bW=bV.Tweets;bX=function(bY){var bZ,b0,b1;b1=bY.Username+": "+bY.Text;b0=a.ofArray([e.Tags().text(b1)]);bZ=a.ofArray([e.Tags().NewTag("td",b0)]);return e.Tags().NewTag("tr",bZ);};b2=a.map(bX,bW);b6=bV.Title;b5=a.ofArray([e.Tags().text(b6)]);b4=a.ofArray([d.add(e.Tags().NewTag("h5",b5),a.ofArray([f.Attr().NewAttr("class","accent-text")]))]);b3=a.ofArray([d.add(e.Tags().NewTag("div",b4),a.ofArray([f.Attr().NewAttr("class","panel-body")])),g.length(b2)>0?d.add(e.Tags().NewTag("table",b2),a.ofArray([f.Attr().NewAttr("class","table table-condensed")])):i.emptyTable("No tweets available")]);bU["HtmlProvider@33"].Clear(bU.get_Body());b9=a.ofArray([e.Tags().text("Recent Tweets")]);b8=a.ofArray([e.Tags().NewTag("h4",b9)]);b7=a.append(a.singleton(d.add(e.Tags().NewTag("div",b8),a.ofArray([f.Attr().NewAttr("class","panel-heading")]))),b3);return bU.AppendI(d.add(e.Tags().NewTag("div",b7),a.ofArray([f.Attr().NewAttr("class","panel panel-default")])));};};b_=function(){return k.Async("MorningDashboard:0",[]);};return i.refreshBlock("twitterBlock",10,$.New(l,{$:0}),b_,bT);},wundergroundBlock:function(){var ca,cE;ca=function(cb){return function(cc){var cd,ce,co,cp,cq,cr,cs,ct,cu,cv,cw,cx,cy,cz,cA,cB,cC,cD;cd=cc.Forecast;ce=function(cf){var cg,ch,ci,cj,ck,cl,cm,cn;ci=cf.Time;ch=a.ofArray([e.Tags().text(ci)]);cl="wi "+cf.WeatherIcon;ck=a.ofArray([f.Attr().NewAttr("class",cl)]);cj=a.ofArray([e.Tags().NewTag("i",ck)]);cn=cf.Temperature+"째";cm=a.ofArray([e.Tags().text(cn)]);cg=a.ofArray([e.Tags().NewTag("td",ch),e.Tags().NewTag("td",cj),e.Tags().NewTag("td",cm)]);return e.Tags().NewTag("tr",cg);};co=a.map(ce,cd);ct="weather wi "+cc.Current.WeatherIcon;cs=a.ofArray([f.Attr().NewAttr("class",ct)]);cr=a.ofArray([e.Tags().NewTag("i",cs)]);cq=a.ofArray([d.add(e.Tags().NewTag("h1",cr),a.ofArray([f.Attr().NewAttr("class","highlight accent-text")]))]);cw="Now: "+cc.Current.Temperature+"째";cv=a.ofArray([e.Tags().text(cw)]);cy="High: "+cc.Current.High+"째";cx=a.ofArray([e.Tags().text(cy)]);cA="Low: "+cc.Current.Low+"째";cz=a.ofArray([e.Tags().text(cA)]);cu=a.ofArray([d.add(e.Tags().NewTag("h4",cv),a.ofArray([f.Attr().NewAttr("class","accent-text")])),d.add(e.Tags().NewTag("h4",cx),a.ofArray([f.Attr().NewAttr("class","accent-text")])),d.add(e.Tags().NewTag("h4",cz),a.ofArray([f.Attr().NewAttr("class","accent-text")]))]);cp=a.ofArray([d.add(e.Tags().NewTag("div",cq),a.ofArray([f.Attr().NewAttr("class","col-md-5 text-center")])),d.add(e.Tags().NewTag("div",cu),a.ofArray([f.Attr().NewAttr("class","col-md-7")]))]);cb["HtmlProvider@33"].Clear(cb.get_Body());cD=a.ofArray([e.Tags().text("Weather")]);cC=a.ofArray([e.Tags().NewTag("h4",cD)]);cB=a.ofArray([d.add(e.Tags().NewTag("div",cC),a.ofArray([f.Attr().NewAttr("class","panel-heading")])),d.add(e.Tags().NewTag("div",cp),a.ofArray([f.Attr().NewAttr("class","panel-body")])),d.add(e.Tags().NewTag("table",co),a.ofArray([f.Attr().NewAttr("class","table table-condensed")]))]);return cb.AppendI(d.add(e.Tags().NewTag("div",cB),a.ofArray([f.Attr().NewAttr("class","panel panel-default")])));};};cE=function(){return k.Async("MorningDashboard:3",[]);};return i.refreshBlock("wundergroundBlock",60*15,$.New(l,{$:0}),cE,ca);}}}});$.OnInit(function(){a=$.Safe($$.WebSharper.List);b=$.Safe($$.WebSharper.Html);c=$.Safe(b.Client);d=$.Safe(c.Operators);e=$.Safe(c.Tags);f=$.Safe(c.Attr);g=$.Safe($$.WebSharper.Seq);h=$.Safe($$.MorningDashboard);i=$.Safe(h.Client);j=$.Safe($$.WebSharper.Remoting);k=$.Safe(j.AjaxRemotingProvider);l=$.Safe(a.T);m=$.Safe($$.WebSharper.Concurrency);n=$.Safe($$.setInterval);o=$.Safe($$.jQuery);return p=$.Safe($$.window);});$.OnLoad(function(){return;});}());
