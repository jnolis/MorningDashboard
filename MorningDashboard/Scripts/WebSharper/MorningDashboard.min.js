(function(){var $$=this,$=this.IntelliFactory.Runtime,a,b,c,d,e,f,g,h,i,j,k,l,m,n;$.Define($$,{MorningDashboard:{Client:{calendarBlock:function(){var o,M;o=function(p){return function(q){var r,s,G,H,I,J,K,L;r=q.Calendars;s=function(t){var u,v,C,D,E,F;u=t.Instances;v=function(w){var x,y,z,A,B;z=w.Event;y=a.ofArray([d.Tags().text(z)]);B=w.Time;A=a.ofArray([d.Tags().text(B)]);x=a.ofArray([d.Tags().NewTag("td",y),d.Tags().NewTag("td",A)]);return d.Tags().NewTag("tr",x);};C=a.map(v,u);F=t.Name;E=a.ofArray([d.Tags().text(F)]);D=a.ofArray([d.Tags().NewTag("h5",E)]);return a.ofArray([e.add(d.Tags().NewTag("div",D),a.ofArray([f.Attr().NewAttr("class","panel-body")])),g.length(t.Instances)>0?e.add(d.Tags().NewTag("table",C),a.ofArray([f.Attr().NewAttr("class","table")])):i.emptyTable("No events today")]);};G=a.map(s,r);H=a.concat(G);p["HtmlProvider@33"].Clear(p.get_Body());L=a.ofArray([d.Tags().text("Daily events")]);K=a.ofArray([d.Tags().NewTag("h4",L)]);J=a.append(a.singleton(e.add(d.Tags().NewTag("div",K),a.ofArray([f.Attr().NewAttr("class","panel-heading")]))),H);I=a.ofArray([e.add(d.Tags().NewTag("div",J),a.ofArray([f.Attr().NewAttr("class","panel panel-default")]))]);return p.AppendI(e.add(d.Tags().NewTag("div",I),a.ofArray([f.Attr().NewAttr("class","col-md-5")])));};};M=function(){return k.Async("MorningDashboard:1",[]);};return i.refreshBlock("calendarBlock",15*60,M,o);},currentTimeBlock:function(){var O,_4;O=function(P){return function(Q){var R,S,T,U,V,W,X,Y,Z,_0,_1,_2,_3;P["HtmlProvider@33"].Clear(P.get_Body());U=a.ofArray([d.Tags().text("Time and date")]);T=a.ofArray([d.Tags().NewTag("h4",U)]);Y=Q.Time;X=a.ofArray([d.Tags().text(Y)]);W=a.ofArray([e.add(d.Tags().NewTag("h1",X),a.ofArray([f.Attr().NewAttr("class","highlight")]))]);_1=Q.Weekday;_0=a.ofArray([d.Tags().text(_1)]);_3=Q.Month+" "+Q.Day;_2=a.ofArray([d.Tags().text(_3)]);Z=a.ofArray([d.Tags().NewTag("h4",_0),d.Tags().NewTag("h4",_2)]);V=a.ofArray([e.add(d.Tags().NewTag("div",W),a.ofArray([f.Attr().NewAttr("class","col-md-6")])),e.add(d.Tags().NewTag("div",Z),a.ofArray([f.Attr().NewAttr("class","col-md-6")]))]);S=a.ofArray([e.add(d.Tags().NewTag("div",T),a.ofArray([f.Attr().NewAttr("class","panel-heading")])),e.add(d.Tags().NewTag("div",V),a.ofArray([f.Attr().NewAttr("class","panel-body")]))]);R=a.ofArray([e.add(d.Tags().NewTag("div",S),a.ofArray([f.Attr().NewAttr("class","panel panel-default")]))]);return P.AppendI(e.add(d.Tags().NewTag("div",R),a.ofArray([f.Attr().NewAttr("class","col-md-5")])));};};_4=function(){return k.Async("MorningDashboard:2",[]);};return i.refreshBlock("currentTimeBlock",5,_4,O);},emptyTable:function(_6){var _7,_8,_9;_9=a.ofArray([d.Tags().text(_6)]);_8=a.ofArray([d.Tags().NewTag("td",_9)]);_7=a.ofArray([d.Tags().NewTag("tr",_8)]);return e.add(d.Tags().NewTag("table",_7),a.ofArray([f.Attr().NewAttr("class","table")]));},oneBusAwayBlock:function(){var _,bx;_=function(ba){return function(bb){var bc,br,bs,bt,bu,bv,bw;bc=function(bd){var be,bf,bg,bh,bo,bp,bq;be=[bd.RouteTitle,bd.Arrivals];bf=be[0];bg=be[1];bh=function(bi){var bj,bk,bl,bm,bn;bl=bi.Time;bk=a.ofArray([d.Tags().text(bl)]);bn=bi.TimeUntil;bm=a.ofArray([d.Tags().text(bn)]);bj=a.ofArray([d.Tags().NewTag("td",bk),d.Tags().NewTag("td",bm)]);return d.Tags().NewTag("tr",bj);};bo=a.map(bh,bg);bq=a.ofArray([d.Tags().text(bf)]);bp=a.ofArray([d.Tags().NewTag("h5",bq)]);return a.ofArray([e.add(d.Tags().NewTag("div",bp),a.ofArray([f.Attr().NewAttr("class","panel-body")])),g.length(bg)>0?e.add(d.Tags().NewTag("table",bo),a.ofArray([f.Attr().NewAttr("class","table")])):i.emptyTable("No upcoming arrivals")]);};br=a.map(bc,bb);bs=a.concat(br);ba["HtmlProvider@33"].Clear(ba.get_Body());bw=a.ofArray([d.Tags().text("Commute")]);bv=a.ofArray([d.Tags().NewTag("h4",bw)]);bu=a.append(a.singleton(e.add(d.Tags().NewTag("div",bv),a.ofArray([f.Attr().NewAttr("class","panel-heading")]))),bs);bt=a.ofArray([e.add(d.Tags().NewTag("div",bu),a.ofArray([f.Attr().NewAttr("class","panel panel-default")]))]);return ba.AppendI(e.add(d.Tags().NewTag("div",bt),a.ofArray([f.Attr().NewAttr("class","col-md-3")])));};};bx=function(){return k.Async("MorningDashboard:4",[]);};return i.refreshBlock("oneBusAwayBlock",5,bx,_);},refreshBlock:function(by,bz,bA,bB){var bC,bD,bE,bL;bC=a.ofArray([f.Attr().NewAttr("id",by)]);bD=d.Tags().NewTag("div",bC);bE=function(bF){var bG;bG=l.Delay(function(){return l.Bind(bA(null),function(bI){var bJ,bK;if(bI.$==1){bK=bI.$0;(bB(bF))(bK);bJ=l.Return(null);}else{bJ=l.Return(null);}return bJ;});});return l.Start(bG,{$:0});};bE(bD);bL=function(){var bN;bN=m(function(){return bE(bD);},bz*1000);return;};e.OnBeforeRender(bL,bD);return bD;},trafficMapBlock:function(){var bP,bQ,bR,bS,bT,bU,bV,bW,bX,bY,bZ;bP=a.ofArray([f.Attr().NewAttr("src","https://maps.googleapis.com/maps/api/js?key=AIzaSyAC3mJ7zFtO-um7HYSBVPNP2zGYv7x3urU")]);bQ=d.Tags().NewTag("script",bP);bR=a.ofArray([f.Attr().NewAttr("src","Scripts/TrafficMap.js")]);bS=d.Tags().NewTag("script",bR);bY=a.ofArray([d.Tags().text("Traffic")]);bX=a.ofArray([d.Tags().NewTag("h4",bY)]);bZ=a.ofArray([f.Attr().NewAttr("id","trafficMap"),f.Attr().NewAttr("class","map")]);bW=a.ofArray([e.add(d.Tags().NewTag("div",bX),a.ofArray([f.Attr().NewAttr("class","panel-heading")])),d.Tags().NewTag("div",bZ)]);bV=a.ofArray([e.add(d.Tags().NewTag("div",bW),a.ofArray([f.Attr().NewAttr("class","panel panel-default")]))]);bU=e.add(d.Tags().NewTag("div",bV),a.ofArray([f.Attr().NewAttr("class","col-md-5")]));e.OnBeforeRender(n.createMap.call(null,"trafficMap"),bU);bT=a.ofArray([bU]);return e.add(d.Tags().NewTag("div",bT),a.ofArray([f.Attr().NewAttr("id","trafficMapBlock")]));},twitterBlock:function(){var b0,cg;b0=function(b1){return function(b2){var b3,b4,b9,b_,b$,ca,cb,cc,cd,ce,cf;b3=b2.Tweets;b4=function(b5){var b6,b7,b8;b8=b5.Username+": "+b5.Text;b7=a.ofArray([d.Tags().text(b8)]);b6=a.ofArray([d.Tags().NewTag("td",b7)]);return d.Tags().NewTag("tr",b6);};b9=a.map(b4,b3);cb=b2.Title;ca=a.ofArray([d.Tags().text(cb)]);b$=a.ofArray([d.Tags().NewTag("h5",ca)]);b_=a.ofArray([e.add(d.Tags().NewTag("div",b$),a.ofArray([f.Attr().NewAttr("class","panel-body")])),g.length(b9)>0?e.add(d.Tags().NewTag("table",b9),a.ofArray([f.Attr().NewAttr("class","table table-condensed")])):i.emptyTable("No tweets available")]);b1["HtmlProvider@33"].Clear(b1.get_Body());cf=a.ofArray([d.Tags().text("Recent Tweets")]);ce=a.ofArray([d.Tags().NewTag("h4",cf)]);cd=a.append(a.singleton(e.add(d.Tags().NewTag("div",ce),a.ofArray([f.Attr().NewAttr("class","panel-heading")]))),b_);cc=a.ofArray([e.add(d.Tags().NewTag("div",cd),a.ofArray([f.Attr().NewAttr("class","panel panel-default")]))]);return b1.AppendI(e.add(d.Tags().NewTag("div",cc),a.ofArray([f.Attr().NewAttr("class","col-md-5")])));};};cg=function(){return k.Async("MorningDashboard:0",[]);};return i.refreshBlock("twitterBlock",10,cg,b0);},wundergroundBlock:function(){var ci,cN;ci=function(cj){return function(ck){var cl,cm,cw,cx,cy,cz,cA,cB,cC,cD,cE,cF,cG,cH,cI,cJ,cK,cL,cM;cl=ck.Forecast;cm=function(cn){var co,cp,cq,cr,cs,ct,cu,cv;cq=cn.Time;cp=a.ofArray([d.Tags().text(cq)]);ct="wi "+cn.WeatherIcon;cs=a.ofArray([f.Attr().NewAttr("class",ct)]);cr=a.ofArray([d.Tags().NewTag("i",cs)]);cv=cn.Temperature+"째";cu=a.ofArray([d.Tags().text(cv)]);co=a.ofArray([d.Tags().NewTag("td",cp),d.Tags().NewTag("td",cr),d.Tags().NewTag("td",cu)]);return d.Tags().NewTag("tr",co);};cw=a.map(cm,cl);cB="weather wi "+ck.Current.WeatherIcon;cA=a.ofArray([f.Attr().NewAttr("class",cB)]);cz=a.ofArray([d.Tags().NewTag("i",cA)]);cy=a.ofArray([e.add(d.Tags().NewTag("h1",cz),a.ofArray([f.Attr().NewAttr("class","highlight")]))]);cE="Current: "+ck.Current.Temperature+"째";cD=a.ofArray([d.Tags().text(cE)]);cG="High: "+ck.Current.High+"째";cF=a.ofArray([d.Tags().text(cG)]);cI="Low: "+ck.Current.Low+"째";cH=a.ofArray([d.Tags().text(cI)]);cC=a.ofArray([d.Tags().NewTag("h4",cD),d.Tags().NewTag("h4",cF),d.Tags().NewTag("h4",cH)]);cx=a.ofArray([e.add(d.Tags().NewTag("div",cy),a.ofArray([f.Attr().NewAttr("class","col-md-6")])),e.add(d.Tags().NewTag("div",cC),a.ofArray([f.Attr().NewAttr("class","col-md-6")]))]);cj["HtmlProvider@33"].Clear(cj.get_Body());cM=a.ofArray([d.Tags().text("Weather")]);cL=a.ofArray([d.Tags().NewTag("h4",cM)]);cK=a.ofArray([e.add(d.Tags().NewTag("div",cL),a.ofArray([f.Attr().NewAttr("class","panel-heading")])),e.add(d.Tags().NewTag("div",cx),a.ofArray([f.Attr().NewAttr("class","panel-body")])),e.add(d.Tags().NewTag("table",cw),a.ofArray([f.Attr().NewAttr("class","table table-condensed")]))]);cJ=a.ofArray([e.add(d.Tags().NewTag("div",cK),a.ofArray([f.Attr().NewAttr("class","panel panel-default")]))]);return cj.AppendI(e.add(d.Tags().NewTag("div",cJ),a.ofArray([f.Attr().NewAttr("class","col-md-4")])));};};cN=function(){return k.Async("MorningDashboard:3",[]);};return i.refreshBlock("wundergroundBlock",60*15,cN,ci);}}}});$.OnInit(function(){a=$.Safe($$.WebSharper.List);b=$.Safe($$.WebSharper.Html);c=$.Safe(b.Client);d=$.Safe(c.Tags);e=$.Safe(c.Operators);f=$.Safe(c.Attr);g=$.Safe($$.WebSharper.Seq);h=$.Safe($$.MorningDashboard);i=$.Safe(h.Client);j=$.Safe($$.WebSharper.Remoting);k=$.Safe(j.AjaxRemotingProvider);l=$.Safe($$.WebSharper.Concurrency);m=$.Safe($$.setInterval);return n=$.Safe($$.window);});$.OnLoad(function(){return;});}());
